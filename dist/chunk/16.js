(window.webpackJsonp=window.webpackJsonp||[]).push([[16,51],{"221":function(e,t,n){"use strict";n.r(t);var a=n(134),c=n(143),i=(n(191),n(136));t.default=function(e){var t=e.field,n=e.isDisable,l=e.placeholder,r=e.onChange,o=e.onBlur;return Object(i.jsx)(c.r,Object(a.a)(Object(a.a)({},e),{},{"value":e.value||void 0,"className":"field","clearable":!0,"placeholder":l,"disabled":n,"onChange":function onChange(e){return r&&r(e)},"onBlur":function onBlur(e){return o&&o(e.target.value)},"maxLength":t.length||255}))}},"222":function(e,t,n){"use strict";n.d(t,"a",(function(){return q}));var a=n(134),c=n(18),i=n(20),l=n(476),r=n(891),o=n(220),s=n(140),u=n(172),d=n(136),f={"labelCol":{"span":9},"wrapperCol":{"span":15}},BaseSection_FormItem=function(e){var t=Object(i.useContext)(q),n=t.data,c=t.refForm,r=t.setSections,o=t.module,j=e.field,b=e.options,p=e.section,O=function gethigherrole(e){u.a.get("/crm/v2/functions/gethigherrole/actions/execute",{"auth_type":"oauth","roleName":e}).then((function(e){if(e&&"success"===e.code){var t=e.details,n={"name":"Region","value":JSON.parse(t.output).name};n.value&&c.setFields([n])}}))},h=function getDepartment(e,t){u.a.get("/crm/v2/functions/getDepartment/actions/execute",{"auth_type":"oauth","roleName":t,"id":e}).then((function(e){if(e&&"success"===e.code){var t=e.details,n={"name":"Account_Department","value":t.output};n.value&&c.setFields([n]);var a={"name":"Public_Lead","value":t.output};a.value&&c.setFields([a])}}))};return Object(d.jsx)(s.e,{"className":"form-item","children":Object(d.jsx)(l.a.Item,Object(a.a)(Object(a.a)(Object(a.a)({"className":"form-item-label","label":null,"name":j.api_name,"rules":[{"required":j.required,"message":j.field_label+"不能为空"}],"tooltip":!(!j.is_show_tip||"icon"!==j.tip_type)&&j.hint,"initialValue":n[j.api_name]||j.default_value},f),b),{},{"children":Object(d.jsx)(m,{"onSelect":function onSelect(e){if(null!=e&&e.maps&&null!=e&&e.maps.length&&null!=e&&e.maps[0].pick_list_values){var t=null==e?void 0:e.maps[0].pick_list_values,n={};n.name=null==e?void 0:e.maps[0].api_name,t.length&&(n.value=t[0].display_value),c.setFields([n]),r((function(n){return n.map((function(n){n.id===p.id&&n.fields.map((function(n){n.api_name===(null==e?void 0:e.maps[0].api_name)&&(n.maps=t)}))})),n}))}if(null!=e&&e.role&&"Leads"===o){if(-1!==(null==e?void 0:e.role.name.indexOf("战区"))){var a={"name":"War_Zone","value":null==e?void 0:e.role.name};c.setFields([a])}O(e.role.name),h(e.role.id,e.role.name)}},"field":j})}))})},m=function FormItem(e){var t=e.isDisable,n=e.field;return Object(d.jsxs)(s.e,{"id":n.api_name,"className":"formItem space-between","children":[Object(d.jsxs)("span",{"className":t?"label disable":"label","onClick":function onClick(){return console.log(n)},"children":[Object(d.jsx)("span",{"className":"required","children":n.required?"*":""}),n.field_label]}),Object(d.jsx)(s.e,{"className":t?"element disable":"element","children":Object(d.jsx)(o.a,Object(a.a)({},e))})]})},j=n(275),b=n(143),BaseSection=function(e){var t=e.section,n=(e.form,e.data.id?t.fields:t.fields.filter((function(e){return"Owner"!==e.api_name}))),a=Object(i.useState)("1"),l=Object(c.a)(a,2),r=l[0],o=l[1];return Object(d.jsx)(s.e,{"className":"baseSectiosContent","children":n.length?Object(d.jsx)(b.g,{"className":"collapse-content","activeKey":[r],"children":Object(d.jsx)(b.g.Panel,{"className":"title-content","onClick":function onClick(){o(r?"":"1"),console.log("section",t)},"title":t.display_label,"children":Object(d.jsxs)(s.e,{"className":"collapse-panel-content","children":[n.map((function(e){return Object(d.jsx)(BaseSection_FormItem,{"field":e,"section":t},e.id)})),Object(d.jsx)(s.e,{"className":"buttomBtn","onClick":function onClick(){return o("")},"children":Object(d.jsxs)(b.b,{"className":"buttomBtnText","children":["收起",t.display_label,Object(d.jsx)(j.a,{})]})})]})},"1")}):null})},p=n(14),O=n(900),h=n(901),x=n(467),v=n(276),_=n(157),g=n.n(_),y=n(16),C=n(22),k=n(154),components_FormItem=function(e){var t=Object(i.useContext)(q),n=t.data,c=t.refForm,r=t.overloadData,o=t.setOverloadData,u=t.fieldMapDependencies,f=t.actionMap,m=t.setDefaultRelationField,j=t.executeFormula,b=t.executeLinkageFunction,p=t.executeSumField,O=t.setDisableEdit,h=t.customModule,x=t.executeEventFunction,v=e.record,_=e.field,w=e.section,N=e.index,D=(w&&w.fields[0].fields||[]).filter((function(e){return-1!==e.view.indexOf(n.id?"edit":"new")})),S=w&&w.fields[0].name,L=function setRelatedSelectField(e){var t=(u||[]).filter((function(e){return e.parent_field_id===_.id}))[0];if(t){var n=_.choices.filter((function(t){return t.label===e}))[0],i=e&&n&&n.id,l=D.filter((function(e){return e.id===t.sub_field_id}))[0];if(l){var s,d=[],f=i&&t.field_map_dependency_items.filter((function(e){return e.parent_value===i}))[0];f&&l.choices.forEach((function(e){-1!==f.sub_values.indexOf(e.id)&&d.push(e)}));var m=c.getFieldValue([S,N,l.name]);m&&0===d.filter((function(e){return e.label===m})).length&&c.setFields([{"name":[S,N,l.name],"value":null}]);var j=Object(a.a)({},r);j[S]||(j[S]=[]),(s=j[S])[N]||(s[N]={}),j[S][N][l.name]={"choices":d},o(j)}}},P=function setRelatedResourceField(e){var t=(u||[]).filter((function(e){return e.parent_field_id===_.id}))[0];if(t){var n=D.filter((function(e){return e.id===t.sub_field_id}))[0];if(n){var i,l={};t.related_field_name&&(l["".concat(t.related_field_name,"_eq")]=e&&e.id||0),n.related_field_search_condition&&0!==Object.values(n.related_field_search_condition)[0]&&c.setFields([{"name":[S,N,n.name],"value":null}]);var s=Object(a.a)({},r);s[S]||(s[S]=[]),(i=s[S])[N]||(i[N]={}),s[S][N][n.name]={"related_field_search_condition":l},o(s)}}},B=function(){var e=Object(C.a)(Object(y.a)().mark((function _callee(e){return Object(y.a)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(!h["".concat(S,"_").concat(_.name,"_onBlur")]){t.next=3;break}return t.next=3,x("".concat(S,"_").concat(_.name,"_onBlur"),{"value":e,"currentRow":c.getFieldValue([S,N]),"rowIndex":N},S,N);case 3:b("".concat(S,".").concat(_.name),e,N),Object.keys(f).find((function(e){return f[e].exec_formula&&-1!==f[e].exec_formula.reference_fields.indexOf("".concat(S,".").concat(_.name))}))&&j(S,N),Object.keys(f).find((function(e){return f[e].sum&&f[e].sum.options.field_key===_.key}))&&p(S),O(["".concat(S,".").concat(_.name)],N);case 7:case"end":return t.stop()}}),_callee)})));return function onBlur(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(C.a)(Object(y.a)().mark((function _callee2(e){return Object(y.a)().wrap((function _callee2$(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("selected_data",e),!h["".concat(S,"_").concat(_.name,"_onSelect")]){t.next=4;break}return t.next=4,x("".concat(S,"_").concat(_.name,"_onSelect"),{"value":e,"currentRow":c.getFieldValue([S,N]),"rowIndex":N},S,N);case 4:f["".concat(S,".").concat(_.name)]&&f["".concat(S,".").concat(_.name)].set_default_relation_field&&m("".concat(S,".").concat(_.name),e,N),b("".concat(S,".").concat(_.name),e,N),"Fields::ResourceField"===_.type&&P(e),"Fields::SelectField"===_.type&&L(e),Object.keys(f).find((function(e){return f[e].exec_formula&&-1!==f[e].exec_formula.reference_fields.indexOf("".concat(S,".").concat(_.name))}))&&j(S,N),O(["".concat(S,".").concat(_.name)],N);case 10:case"end":return t.stop()}}),_callee2)})));return function onSelect(t){return e.apply(this,arguments)}}(),E=_.is_disable_edit;_.is_disable_edit&&_.disable_edit_condition&&""!==_.disable_edit_condition&&(E=S?c.getFieldValue([S,N,"".concat(_.name,"_disable_edit")]):_.disable_edit);var V=E||"read_only"===_.accessibility||!_.can_modify||_.is_formula;return Object(d.jsx)(s.e,{"className":"form-item","children":Object(d.jsx)(l.a.Item,Object(a.a)(Object(a.a)({},_),{},{"className":"form-item-label","name":[v.name,_.name],"tooltip":!(!_.is_show_tip||"icon"!==_.tip_type)&&_.hint,"label":null,"initialValue":function getDefaultValue(){var e=_.default_value||_.options.default_value||_.options.default_enable;return!e&&"Fields::DateField"===_.type&&_.options.default_current_date?g()():e&&"Fields::MultipleSelectField"===_.type?[e]:e}(),"rules":Object(k.h)(_),"fieldKey":[v.fieldKey,_.name],"children":Object(d.jsx)(F,{"subFormName":S,"isDisable":V,"index":N,"overloadData":r,"field":_,"onBlur":B,"onSelect":I,"onDropdown":function onDropdown(e){h["".concat(S,"_").concat(_.name,"_onDropdown")]&&x("".concat(S,"_").concat(_.name,"_onDropdown"),Object(a.a)(Object(a.a)({},e),{},{"currentRow":c.getFieldValue([S,N]),"rowIndex":N}),S,N)}})}))})},F=function FormItem(e){var t=e.isDisable,n=e.field,c=Object(k.h)(n).find((function(e){return e.required})),i="Fields::MultipleAttachmentField"===n.type||"Fields::MultipleImageField"===n.type?"  ":n.label;return Object(d.jsxs)(s.e,{"className":"formItem space-between","children":[Object(d.jsxs)("span",{"className":t?"label disable":"label","children":[Object(d.jsx)("span",{"className":"required","children":c?"*":""}),i]}),Object(d.jsx)(s.e,{"className":t?"element disable":"element","children":Object(d.jsx)(o.a,Object(a.a)({},e))})]})},ListFiled=function(e){var t=e.field,n=e.section,a=e.record,l=e.fieldData,r=e.setActiveKey,o=e.index,u=Object(i.useState)({}),f=Object(c.a)(u,2),m=f[0],p=f[1];return Object(i.useEffect)((function(){var e={};t.fields.map((function(t){e[t.name]=function getDefaultValue(e){var t=e.default_value||e.options.default_value||e.options.default_enable;return t||"Fields::DateField"!==e.type&&"Fields::DatetimeField"!==e.type||!e.options.default_current_date?t&&"Fields::MultipleSelectField"===e.type?[t]:t:g()()}(t)||null})),p(e)}),[]),Object(d.jsxs)(s.e,{"className":"swiperContent","children":[Object(d.jsx)(s.e,{"className":"swiperContent-content","children":t.fields.map((function(e){return Object(d.jsx)(components_FormItem,{"values":m,"record":a,"setValues":p,"fieldData":l,"section":n,"field":e,"index":o})}))}),Object(d.jsx)(s.e,{"className":"buttomBtn","onClick":function onClick(){return r("")},"children":Object(d.jsxs)(b.b,{"className":"buttomBtnText","children":["收起",n.title+(a.name+1),Object(d.jsx)(j.a,{})]})})]})},w=n(284),SumField=function(e){var t=e.field,n=e.data;return Object(d.jsx)(l.a.Item,{"className":"sumFieldContent","label":null,"name":t.name,"labelCol":{"span":16},"wrapperCol":{"span":8},"initialValue":n&&n[t.name]||0,"children":Object(d.jsx)(N,{"field":t})},t.id)},N=function FormItem(e){var t=e.field;return Object(d.jsxs)(s.e,{"className":"sumFiledItem","children":[Object(d.jsxs)("span",{"className":"sumFiledItemText","children":[t.label,":"]}),Object(d.jsx)(w.a,Object(a.a)(Object(a.a)({},e),{},{"disabled":!0,"className":"disableSumInput","bordered":!1}))]})},SubSection=function(e){var t=e.section,n=e.data,a=e.form,r=Object(i.useState)(!1),o=Object(c.a)(r,2),u=o[0],f=o[1],m=t.fields.filter((function(e){return-1!==e.mobile_view.indexOf(n.id?"edit":"new")&&"hidden"!==e.accessibility})),j=m?m.key:"",_=Object(i.useState)(n&&n[j]?n[j]:[]),g=Object(c.a)(_,2),y=g[0],C=g[1],k=Object(i.useState)(""),F=Object(c.a)(k,2),w=F[0],N=F[1],D=Object(i.useState)(!1),S=Object(c.a)(D,2),L=S[0],P=S[1];return Object(d.jsx)(s.e,{"className":"subSelectionContent","children":"step_form"===a.category?Object(d.jsxs)(d.Fragment,{"children":[Object(d.jsx)(l.a.List,{"name":t.fields[0].name,"children":function children(e,n,a){var c=n.add,r=n.remove,o=a.errors;return Object(d.jsxs)(d.Fragment,{"children":[Object(d.jsx)(b.g,{"className":"collapse-content","accordion":!0,"activeKey":w+"","children":e.map((function(e,n){var a;return Object(d.jsx)(b.g.Panel,{"className":"title-content","title":t.title+(e.name+1),"onClick":function onClick(){return N(L||w===e.name?"":e.name)},"arrow":function arrow(t){return Object(d.jsxs)(s.e,{"className":"arrow","children":[t?Object(d.jsx)(h.a,{}):Object(d.jsx)(O.a,{}),Object(d.jsx)(s.e,{"className":"delete","onClick":function onClick(){P(!0),b.i.show({"content":"确认删除","closeOnAction":!0,"actions":[[{"key":"cancel","text":"取消","onClick":function onClick(){P(!1)}},{"key":"delete","text":"删除","bold":!0,"danger":!0,"onClick":function onClick(){P(!1),r(e.name),C(y.filter((function(t){return y[e.name]!==t})))}}]]})},"children":Object(d.jsx)(x.a,{"color":"var(--adm-color-danger)"})})]})},"children":Object(i.createElement)(ListFiled,(a={"setActiveKey":N,"fieldData":y,"section":t,"record":e,"index":n,"remove":r,"setFieldData":C},Object(p.a)(a,"index",n),Object(p.a)(a,"key",n),Object(p.a)(a,"showVisible",u),Object(p.a)(a,"field",m[0]),a))},e.name+"")}))}),Object(d.jsx)(s.e,{"onClick":function onClick(){c(),f(!0)},"className":"addContent","children":Object(d.jsxs)(s.d,{"className":"title","children":[t.title,Object(d.jsx)(v.a,{})]})}),Object(d.jsx)(l.a.ErrorList,{"errors":o})]})}}),m.filter((function(e){return"Fields::SumField"===e.type})).map((function(e,a){return Object(i.createElement)(SumField,{"fieldData":y,"index":a,"data":n,"section":t,"key":e.id,"type":n.id?"edit":"new","field":e})}))]}):Object(d.jsx)(b.g,{"className":"section-content","children":Object(d.jsxs)(b.g.Panel,{"title":t.title,"children":[Object(d.jsx)(l.a.List,{"name":t.fields[0].name,"children":function children(e,n,a){var c=n.add,r=n.remove,o=a.errors;return Object(d.jsxs)(d.Fragment,{"children":[Object(d.jsx)(b.g,{"className":"collapse-content","accordion":!0,"activeKey":w+"","children":e.map((function(e,n){return Object(d.jsx)(b.g.Panel,{"className":"title-content","title":t.title+(e.name+1),"onClick":function onClick(){return N(L||w===e.name?"":e.name)},"arrow":function arrow(t){return Object(d.jsxs)(s.e,{"className":"arrow","children":[t?Object(d.jsx)(h.a,{}):Object(d.jsx)(O.a,{}),Object(d.jsx)(s.e,{"className":"delete","onClick":function onClick(){P(!0),b.i.show({"content":"确认删除","closeOnAction":!0,"actions":[[{"key":"cancel","text":"取消","onClick":function onClick(){P(!1)}},{"key":"delete","text":"删除","bold":!0,"danger":!0,"onClick":function onClick(){P(!1),r(e.name),C(y.filter((function(t){return y[e.name]!==t})))}}]]})},"children":Object(d.jsx)(x.a,{"color":"var(--adm-color-danger)"})})]})},"children":Object(i.createElement)(ListFiled,{"setActiveKey":N,"fieldData":y,"section":t,"record":e,"index":n,"remove":r,"setFieldData":C,"key":n,"showVisible":u,"field":m[0]})},e.name+"")}))}),Object(d.jsx)(s.e,{"onClick":function onClick(){c(),f(!0)},"className":"addContent","children":Object(d.jsxs)(s.d,{"className":"title","children":[t.title,Object(d.jsx)(v.a,{})]})}),Object(d.jsx)(l.a.ErrorList,{"errors":o})]})}}),m.filter((function(e){return"Fields::SumField"===e.type})).map((function(e,a){return Object(i.createElement)(SumField,{"fieldData":y,"index":a,"data":n,"section":t,"key":e.id,"type":n.id?"edit":"new","field":e})}))]},"")})})},D=n(268),S=n(468),L=n(478),P=n(221),B=function SelectAddress(e){var t=Object(i.useContext)(q).addresses,n=e.section,a=e.data,r=e.form,o=Object(i.useState)(!1),s=Object(c.a)(o,2),u=s[0],f=s[1];Object(i.useEffect)((function(){f(!a.id)}),[a]);var m=function contentRender(){return Object(d.jsxs)("div",{"className":"baseForm","children":[Object(d.jsx)(l.a.Item,{"name":n.fields[0].name,"style":{"marginBottom":10},"rules":Object(k.h)(n.fields[0]),"children":Object(d.jsx)(P.default,{"field":n.fields[0],"placeholder":u?"请输入或选择地址":"","isDisable":!u})}),a.id&&Object(d.jsx)("p",{"style":{"marginLeft":5,"marginBottom":10},"children":u?Object(d.jsx)("a",{"onClick":function onClick(){return f(!1)},"children":"确定"}):Object(d.jsx)("a",{"onClick":function onClick(){return f(!0)},"children":"修改"})}),u&&Object.keys(t).length>0&&Object(d.jsx)("div",{"style":{"backgroundColor":"#fafafa","padding":20,"maxHeight":210,"overflow":"scroll"},"children":Object(d.jsx)(l.a.Item,{"name":n.fields[0].name,"style":{"marginBottom":0},"children":Object(d.jsx)(D.a.Group,{"children":Object.keys(t).map((function(e){return(t[e]||[]).length>0&&Object(d.jsxs)("div",{"children":[Object(d.jsxs)(S.a,{"orientation":"left","style":{"margin":"10px 0","borderColor":"#fafafa","color":"gray","fontSize":13,"fontWeight":"normal"},"children":[e," ","地址"]}),Object(d.jsx)(L.b,{"direction":"vertical","children":t[e].map((function(e){return Object(d.jsx)(D.a,{"value":e.address,"children":e.address},e.id)}))})]},e)}))})})})]})};return Object(d.jsx)(d.Fragment,{"children":"step_form"===r.category?m():Object(d.jsx)(b.g,{"children":Object(d.jsx)(b.g.Panel,{"title":n.title,"children":m()},"0")})})},I=n(251),E=function normFile(e){return Array.isArray(e)?e:e&&e.fileList},FilesUpload=function(e){var t=e.section,n=e.data,a=e.form,r=Object(i.useState)([]),o=Object(c.a)(r,2),u=(o[0],o[1]),f=t.fields[0];return Object(i.useEffect)((function(){u((f&&n[f.name]||[]).map((function(e){return{"uid":e.id,"name":Object(d.jsxs)("span",{"children":[e.name,Object(d.jsxs)("span",{"style":{"marginLeft":20,"color":"#ccc"},"children":[e.size,"KB"]})]}),"status":"done","url":e.url}})))}),[n]),Object(d.jsx)(s.e,{"className":"form-item-label","children":"step_form"===a.category?Object(d.jsx)(l.a.Item,{"className":"element-field","name":t.fields[0].name,"style":{"marginBottom":0},"valuePropName":"fileList","getValueFromEvent":E,"children":Object(d.jsx)(I.default,{"isDisable":!1})}):Object(d.jsx)(b.g,{"children":Object(d.jsx)(b.g.Panel,{"title":t.title,"children":Object(d.jsx)(l.a.Item,{"className":"element-field","name":t.fields[0].name,"style":{"marginBottom":0},"valuePropName":"fileList","getValueFromEvent":E,"children":Object(d.jsx)(I.default,{"isDisable":!1})})},"")})})},V=n(252),R=function normFile(e){return Array.isArray(e)?e:e&&e.fileList},ImagesUpload=function(e){var t=e.section;e.form;return Object(d.jsx)(s.e,{"className":"form-item-label","children":Object(d.jsx)(b.g,{"children":Object(d.jsx)(b.g.Panel,{"title":t.display_label,"children":Object(d.jsx)(l.a.Item,{"className":"element-field","name":t.fields[0].api_name,"style":{"marginBottom":0},"valuePropName":"fileList","getValueFromEvent":R,"children":Object(d.jsx)(V.default,{"isDisable":!1})})},"")})})},Section=function(e){var t=e.form,n=e.section,a=e.data;return function renderSection(){return"sub_form"===n.data_type?Object(d.jsx)(SubSection,{"section":n,"data":a,"form":t}):"address"===n.data_type?Object(d.jsx)(B,{"section":n,"data":a,"form":t}):"attachment"===n.data_type?Object(d.jsx)(FilesUpload,{"section":n,"data":a,"form":t}):"profileimage"===n.data_type?Object(d.jsx)(ImagesUpload,{"section":n,"data":a,"form":t}):Object(d.jsx)(BaseSection,{"section":n,"data":a,"form":t})}()},A=(n(49),n(265),n(699)),H=n(19),K=n(24),U=n(257),q=Object(i.createContext)({});t.b=function(e){var t=e.form,n=e.sections,o=e.data,f=e.customRefForm,m=e.module,j=e.title,p=e.id,O=f||l.a.useForm(),h=Object(c.a)(O,1)[0],x=Object(i.useState)(!1),v=Object(c.a)(x,2),_=v[0],g=v[1],y=Object(i.useState)(),C=Object(c.a)(y,2),k=C[0],F=C[1];Object(i.useEffect)((function(){!function getZOHOuser(){var e=Object(A.a)("currentUser");e&&F(e)}()}),[]);var w=function onFinish(e){g(!0);var t={"name":"","description":"","phone":"","amount":0};switch(m){case"Leads":t.name=e.Company,t.description=e.Full_Name,t.phone=e.Phone;break;case"Potentials":t.name=e.Deal_Name,t.description=e.Stage,t.amount=e.Amount;break;case"Accounts":t.name=e.Account_Name,t.description=e.Department,t.phone=e.Phone;break;case"Public_Leads":t.name=e.Name,t.description=e.Last_Name,t.phone=e.Phone}p?(console.log("编辑"),u.a.put("/crm/v2/".concat(m,"/").concat(p),{"data":[Object(a.a)({},e)]}).then((function(e){e.data&&("SUCCESS"===e.data[0].code?(r.b.success("修改成功"),Object(H.d)()):r.b.error("修改失败，请重试"))})).catch((function(e){g(!1),console.log(e),r.b.error("修改失败，请重试")}))):u.a.post("/crm/v2/".concat(m),{"data":[Object(a.a)({},e)]}).then((function(n){console.log("res",n),n.data&&("SUCCESS"===n.data[0].code?(r.b.success("创建成功"),Object(H.g)({"url":"pages/main/workbench/zoho/show/index?module_name=".concat(m,"&zoho_id=").concat(n.data[0].details.id,"&title=").concat(j,"&name=").concat(t.name,"&description=").concat(t.description,"&phone=").concat(t.phone,"&amount=").concat(t.amount)}),K.a.eventCenter.trigger("addItem",Object(a.a)(Object(a.a)({},e),n.data[0].details))):r.b.error("创建失败，请重试"))})).catch((function(e){console.log(e),g(!1),r.b.error("创建失败，请重试")}))},N=Object(a.a)(Object(a.a)({},e),{},{"refForm":h,"zohoUser":k});return Object(d.jsxs)(q.Provider,{"value":N,"children":[Object(d.jsx)(b.w,{"onBack":function onBack(){"show"===e.open_type?e.onBack&&e.onBack():Object(H.d)()},"right":Object(d.jsx)(s.d,{"className":"form-save","onClick":function onClick(){_||function submitForm(){h.validateFields().then((function(e){if("Leads"===m){var t={};e.Phone?t.phone=e.Phone:delete t.phone,e.Company?t.name=e.Company:delete t.name,p&&(e.Company===o.Company&&delete t.name,e.Phone===o.Phone&&delete t.phone),t.phone||t.name?(g(!0),U.a.post("/api/v1/functions/account_duplicate_check/execute",{"params":{"form_data":t}},{"headers":{"Content-Type":"application/json","Authorization":"Bearer NYbImmWjVdyN8Dh8PPq4XqVuKNCNWcp5dCDa8o2Xtyg"}}).then((function(t){200===t.code&&("无重复"===t.data.result?w(e):(g(!1),b.L.show({"content":Object(d.jsx)(s.e,{"style":{"display":"flex","flexDirection":"column"},"children":t.data.result.map((function(e,t){return Object(d.jsx)(s.d,{"children":e},t)}))}),"duration":5e3})))})).catch((function(){g(!1)}))):w(e)}else w(e)})).catch((function(e){var t=document.getElementById(e.errorFields[0].name[0]);t&&t.scrollIntoView(),e.errorFields.forEach((function(e){r.b.error(e.errors)}))}))}()},"children":"保存"}),"children":p?"编辑":"创建"}),Object(d.jsxs)(s.c,{"className":"form-container","children":[Object(d.jsx)(l.a,{"form":h,"layout":"horizontal","labelWrap":!0,"onFinish":w,"children":n.filter((function(e){return!e.hidden})).map((function(e,n){return Object(d.jsx)(Section,{"form":t,"data":o,"section":e},n)}))}),Object(d.jsx)(s.e,{"className":"submit-btn"})]}),Object(d.jsx)(b.u,{"visible":_})]})}},"243":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n(6),c=n(5),i=n(13),l=n(10),r=n(11),o=n(43),s=n(14),u=n(170);window;Error;var d=function(){function HttpClient(){Object(c.a)(this,HttpClient)}return Object(a.a)(HttpClient,null,[{"key":"parseResponse","value":function parseResponse(e){console.log("parseResponse",e);var t=e.data;return 201===e.status?t:Promise.reject(t)}},{"key":"get","value":function get(e,t){return u.a.get(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"put","value":function put(e,t){return u.a.put(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"delete","value":function _delete(e,t){return u.a.delete(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"post","value":function post(e,t,n){return u.a.post(e,t,n).then((function(e){return HttpClient.parseResponse(e)}))}}]),HttpClient}()},"251":function(e,t,n){"use strict";n.r(t);var a=n(134),c=n(18),i=n(20),l=n(440),r=n(176),o=n(486),s=n(222),u=n(140),d=n(136);t.default=function(e){var t=e.isDisable,n=e.onChange,f=Object(i.useState)([]),m=Object(c.a)(f,2),j=m[0],b=m[1],p=Object(i.useContext)(s.a).type;Object(i.useEffect)((function(){var t=(e.value||[]).map((function(e){return{"uid":e.id,"name":Object(d.jsxs)("span",{"children":[e.name,Object(d.jsxs)("span",{"style":{"marginLeft":20,"color":"#ccc"},"children":[e.size,"KB"]})]}),"status":"done","url":e.url}}));b("new"!==p?t:[])}),[]);var O={"name":"file","multiple":!0,"fileList":j,"beforeUpload":function beforeUpload(){return!1},"onChange":function onChange(e){b(e.fileList),n&&n(e.fileList)}};return Object(d.jsx)(u.e,{"className":"attachment-field","children":Object(d.jsx)(l.a,Object(a.a)(Object(a.a)({},O),{},{"children":!t&&Object(d.jsx)(r.a,{"icon":Object(d.jsx)(o.a,{}),"children":"选择文件"})}))})}},"252":function(e,t,n){"use strict";n.r(t);var a=n(134),c=n(16),i=n(22),l=n(18),r=n(20),o=n(440),s=n(442),u=n(483),d=n(222),f=n(140),m=n(136),j=function getBase64(e){return new Promise((function(t,n){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){return t(a.result)},a.onerror=function(e){return n(e)}}))};t.default=function(e){var t=e.isDisable,n=e.onChange,b=Object(r.useContext)(d.a).type;Object(r.useEffect)((function(){var t=(e.value||[]).map((function(e){return{"uid":e.id,"name":e.name,"status":"done","url":e.url,"thumbUrl":e.thumb_url}}));v("new"!==b?t:[]),t.length&&n&&n(t)}),[]);var p,O=Object(r.useState)([]),h=Object(l.a)(O,2),x=h[0],v=h[1],_=Object(r.useState)(!1),g=Object(l.a)(_,2),y=g[0],C=g[1],k=Object(r.useState)(""),F=Object(l.a)(k,2),w=F[0],N=F[1],D={"name":"file","multiple":!0,"fileList":x,"accept":"image/*","defaultFileList":x,"beforeUpload":function beforeUpload(){return!1},"onChange":function onChange(e){v(e.fileList),n&&n(e.fileList)},"onPreview":(p=Object(i.a)(Object(c.a)().mark((function _callee(e){return Object(c.a)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,j(e.originFileObj);case 3:e.preview=t.sent;case 4:C(!0),N(e.url||e.preview);case 6:case"end":return t.stop()}}),_callee)}))),function onPreview(e){return p.apply(this,arguments)})};return Object(m.jsxs)(f.e,{"className":"image-field","children":[Object(m.jsx)(o.a,Object(a.a)(Object(a.a)({"listType":"picture-card"},D),{},{"children":!t&&Object(m.jsx)(u.a,{})})),Object(m.jsx)("div",{"style":{"display":"none"},"children":Object(m.jsx)(s.a.PreviewGroup,{"preview":{"visible":y,"onVisibleChange":function onVisibleChange(e){return C(e)}},"children":Object(m.jsx)(s.a,{"src":w})})})]})}},"257":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n(5),c=n(6),i=n(243),l=n(917),r=function(){function HttpLoading(){Object(a.a)(this,HttpLoading)}return Object(c.a)(HttpLoading,null,[{"key":"get","value":function get(e,t){return Object(l.b)(),i.a.get(e,t).then((function(e){return Object(l.a)(),e})).catch((function(e){return Object(l.a)(),Promise.reject(e)}))}},{"key":"put","value":function put(e,t){return Object(l.b)(),i.a.put(e,t).then((function(e){return Object(l.a)(),e})).catch((function(e){return Object(l.a)(),Object(l.c)({"icon":"error","title":e.message,"duration":2e3}),Promise.reject(e)}))}},{"key":"post","value":function post(e,t,n){return Object(l.b)(),i.a.post(e,t,n).then((function(e){return Object(l.a)(),console.log("HttpLoading.posr-then",e),Promise.resolve(e)})).catch((function(e){return console.log("post",e),Object(l.a)(),Object(l.c)({"icon":"error","title":e.message,"duration":2e3}),Promise.reject(e)}))}}]),HttpLoading}()},"265":function(e,t,n){}}]);