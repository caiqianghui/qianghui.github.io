(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{"154":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return getRules})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcFieldValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCloudToken})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getZOHOtoken})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getMeetStr})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getMeetValueTip})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getExecutionValueTip})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getLayoutRuleResult})),__webpack_require__.d(__webpack_exports__,"l",(function(){return thousandAbdDecimal})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isMeetConditions})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getSelectQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getModuleText}));var _Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(134),_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(699),_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(917),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(891),dayjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(157),dayjs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__),_http_http__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(170);function getRules(e){var t=[];if(e.validations.presence){["Fields::TextField","Fields::TextAreaField","Fields::PercentField","Fields::IntegerField","Fields::DecimalField"].find((function(t){return t===e.type}))?t.push({"required":!0,"message":"请输入"+e.label}):t.push({"required":!0,"message":e.label+"为空"})}if(e.validations.length&&0!==e.validations.length.maximum&&t.push({"max":e.validations.length.maximum}),e.validations.numericality){var _={},n=0,a=0;"greater_than"===e.validations.numericality.lower_bound_check?(n=e.validations.numericality.lower_bound_value+1,_.min=n):"greater_than_or_equal_to"===e.validations.numericality.lower_bound_check&&(n=e.validations.numericality.lower_bound_value,_.min=n),"less_than"===e.validations.numericality.upper_bound_check?(a=e.validations.numericality.upper_bound_value-1,_.max=a):"less_than_or_equal_to"===e.validations.numericality.upper_bound_check&&(a=e.validations.numericality.upper_bound_value,_.max=a),_.message=e.label+"须在"+n+"-"+a+"之间",Object.keys(_).length>0&&t.push(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},_),{},{"type":"number"}))}return"Fields::EmailField"===e.type&&t.push({"type":"email","message":e.label+"不是一个有效的email"}),"Fields::LinkField"===e.type&&t.push({"type":"url","message":e.label+"不是一个有效的url"}),t}function calcFieldValue(formula,fields,data,sub_label,data_item){var newFormula=formula;console.log("fields",fields.label),fields.forEach((function(e){newFormula=sub_label&&data_item?newFormula.replace("/[".concat(sub_label,".").concat(e.label,"]/g"),data_item[e.name]&&data_item[e.name]._isAdayjsObject?dayjs__WEBPACK_IMPORTED_MODULE_7___default()(data_item[e.name]).format("YYYY-MM-DD"):data_item[e.name]||0):data[e.name]&&data[e.name]._isAdayjsObject?newFormula.replace("/[".concat(e.label,"]/g"),dayjs__WEBPACK_IMPORTED_MODULE_7___default()(data[e.name]).format("YYYY-MM-DD")):newFormula.replace("/[".concat(e.label,"]/g"),data[e.name]||("Fields::TextField"===e.type?"":0))}));try{var result=eval(newFormula);return console.log(newFormula,result),"number"==typeof result?Math.round(100*result)/100:result}catch(e){return console.log(newFormula,e),null}}function refreshCloudToken(e){return new Promise(function(){var t=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee(t,_){var n,a;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee$(_){for(;;)switch(_.prev=_.next){case 0:n=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expires_in"),a=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("access_token"),console.log("accessToken",a),a&&"refresh_token"===e.grant_type&&(!n||dayjs__WEBPACK_IMPORTED_MODULE_7___default.a.unix(Number(n)).diff(dayjs__WEBPACK_IMPORTED_MODULE_7___default()(),"minute")>1)?t({"access_token":a}):_http_http__WEBPACK_IMPORTED_MODULE_8__.a.post("/oauth/token",e,{"headers":{"Accept":"application/json"}}).then((function(e){var _=e.data;_.refresh_token&&(Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"refresh_token","data":_.refresh_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"access_token","data":_.access_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"expires_in","data":_.created_at+_.expires_in})),t(_)})).catch((function(e){Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__.a)(),e.toString().indexOf("Request failed with status code 400")&&antd__WEBPACK_IMPORTED_MODULE_6__.b.error("token 过期, 请退出重新进入Zoho CRM")}));case 4:case"end":return _.stop()}}),_callee)})));return function(e,_){return t.apply(this,arguments)}}())}function getCloudToken(){return _getCloudToken.apply(this,arguments)}function _getCloudToken(){return(_getCloudToken=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee3(){var e,t,_,n;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee3$(a){for(;;)switch(a.prev=a.next){case 0:if(e=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expires_in"),t=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("access_token"),_=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("refresh_token"),!t||e&&!(dayjs__WEBPACK_IMPORTED_MODULE_7___default.a.unix(Number(e)).diff(dayjs__WEBPACK_IMPORTED_MODULE_7___default()(),"minute")>1)){a.next=5;break}return a.abrupt("return","Bearer ".concat(t));case 5:if(!_||"undefined"===_){a.next=10;break}return a.next=8,refreshCloudToken({"grant_type":"refresh_token","refresh_token":_}).then((function(e){return e?"Bearer ".concat(e.access_token):null}));case 8:return n=a.sent,a.abrupt("return",n);case 10:return a.abrupt("return",null);case 11:case"end":return a.stop()}}),_callee3)})))).apply(this,arguments)}function refreshZOHOToken(){return new Promise(function(){var e=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee2(e,t){var _;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,getCloudToken();case 2:(_=n.sent)&&_http_http__WEBPACK_IMPORTED_MODULE_8__.a.post("/api/v1/functions/current_user_zoho_access_token/execute",{},{"headers":{"Authorization":_}}).then((function(_){if(200===_.data.code){var n=_.data.data.result;Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"zoho_access_token","data":n.zoho_access_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"expiration_time","data":n.expiration_time}),e(n)}else t()})).catch((function(e){antd__WEBPACK_IMPORTED_MODULE_6__.b.error("网络错误"),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__.a)(),t()}));case 4:case"end":return n.stop()}}),_callee2)})));return function(t,_){return e.apply(this,arguments)}}())}function getZOHOtoken(){return _getZOHOtoken.apply(this,arguments)}function _getZOHOtoken(){return(_getZOHOtoken=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee4(){var e,t,_;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:if(e=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("zoho_access_token"),t=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expiration_time"),console.log("zoho_access_token",e),t&&!(t&&dayjs__WEBPACK_IMPORTED_MODULE_7___default()(t||0)<dayjs__WEBPACK_IMPORTED_MODULE_7___default()(new Date))){n.next=10;break}return n.next=6,refreshZOHOToken().then((function(e){return e?"".concat(e.zoho_access_token):null})).catch((function(){return null}));case 6:return _=n.sent,n.abrupt("return",_);case 10:return n.abrupt("return",e?"".concat(e):null);case 11:case"end":return n.stop()}}),_callee4)})))).apply(this,arguments)}function isDate(e){return!!new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/).test(e)}function initSearchCondition(e){var t=[];return(e||[]).forEach((function(e){var _={};_.id=e.id,_.field_id=e.field_id,_.criteria_option=e.criteria_option,_.criteria_value=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.criteria_value),_.show_field_condition=e.show_field_condition,e.criteria_value[0]&&isDate(e.criteria_value[0])&&(_.criteria_value[0]=dayjs__WEBPACK_IMPORTED_MODULE_7___default()(e.criteria_value[0])),e.criteria_value[1]&&isDate(e.criteria_value[1])&&(_.criteria_value[1]=dayjs__WEBPACK_IMPORTED_MODULE_7___default()(e.criteria_value[1])),t.push(_)})),t}function getMeetStr(e){var t="满";return e.ladder_promotion||("product"===e.category&&"buy_and_give"===e.promotion_rule?t="每满":"combined"===e.category?("buy_and_give"===e.promotion_rule||"amount"===e.promotion_type&&"direct_reduction"===e.promotion_rule)&&(t="每满"):"whole_order"===e.category&&"discount"!==e.promotion_rule&&(t="每满")),t}function getMeetValueTip(e){return"buy_and_give"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，赠送"):"direct_reduction"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，").concat("product"!==e.category&&"amount"===e.promotion_type?"订单金额减":"订货价统一降至"):"discount"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，").concat("product"!==e.category&&"amount"===e.promotion_type?"订单金额打折":"在原订货价基础上再打折"):null}function getExecutionValueTip(e){return"buy_and_give"===e.promotion_rule?"个":"direct_reduction"===e.promotion_rule?"元":"discount"===e.promotion_rule?"%":null}function isMeetCondition(e,t,_){var n=_.filter((function(t){return t.id===e.field_id}))[0];if(!n)return!1;if(null!=n&&n.name){var a=t[null==n?void 0:n.name];if(-1!==["IS","ON","EQ"].indexOf(e.criteria_option)&&a===e.criteria_value[0]||-1!==["ISNT","NOT_EQ"].indexOf(e.criteria_option)&&a!==e.criteria_value[0]||"IN"===e.criteria_option&&-1!==(e.criteria_value[0]||[]).indexOf(a)||"NOT_IN"===e.criteria_option&&-1===(e.criteria_value[0]||[]).indexOf(a)||"CONTAINS"===e.criteria_option&&-1!==String(a).indexOf(e.criteria_value[0])||"DOESNT_CONTAINS"===e.criteria_option&&-1===String(a).indexOf(e.criteria_value[0])||"ARRAY_CONTAINS"===e.criteria_option&&-1!==(a||[]).indexOf(e.criteria_value[0])||"ARRAY_DOESNT_CONTAINS"===e.criteria_option&&-1===(a||[]).indexOf(e.criteria_value[0])||"STARTS_WITH"===e.criteria_option&&String(a).startsWith(e.criteria_value[0])||"ENDS_WITH"===e.criteria_option&&String(a).endsWith(e.criteria_value[0])||"IS_EMPTY"===e.criteria_option&&-1!==["","null","undefined"].indexOf(String(a))||"IS_NOT_EMPTY"===e.criteria_option&&-1===["","null","undefined"].indexOf(String(a))||"BETWEEN"===e.criteria_option&&a>=e.criteria_value[0]&&a<=e.criteria_value[1]||"NOT_BETWEEN"===e.criteria_option&&a<e.criteria_value[0]&&a>e.criteria_value[1]||-1!==["BEFORE","LT"].indexOf(e.criteria_option)&&a<e.criteria_value[0]||"LTEQ"===e.criteria_option&&a<=e.criteria_value[0]||-1!==["AFTER","GT"].indexOf(e.criteria_option)&&a>e.criteria_value[0]||"GTEQ"===e.criteria_option&&a>=e.criteria_value[0]||"SELECTED"===e.criteria_option&&!0===a||"NOT_SELECTED"===e.criteria_option&&!1===a)return!0}return!1}function getLayoutRuleResult(layoutRule,allValues,sections){var isMeet=!1,fields=sections.map((function(e){return e.fields})).flat(),meets=[];if(layoutRule.conditions.forEach((function(e){meets.push(isMeetCondition(e,allValues,fields))})),"AND"===layoutRule.patten||!layoutRule.patten&&!layoutRule.custom_patten)isMeet=!0,meets.forEach((function(e){isMeet=isMeet&&e}));else if("OR"===layoutRule.patten)meets.forEach((function(e){isMeet=isMeet||e}));else if(layoutRule.custom_patten){var str=layoutRule.custom_patten;meets.forEach((function(e,t){str=str.replace("[".concat(t+1,"]"),e)})),console.log(str),str=str.replace(/OR/g,"||").replace(/AND/g,"&&"),console.log("str=======>",str);try{isMeet=!0===eval(str)}catch(e){console.log(layoutRule,e),isMeet=!1}}var newSections=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(sections),clearValues={};return layoutRule.actions.forEach((function(e){"field"===e.show_type?newSections.forEach((function(t,_){t.fields.forEach((function(t,n){-1!==e.values.indexOf(t.id)&&(newSections[_].fields[n].hidden=!isMeet,isMeet||(clearValues[newSections[_].fields[n].name]=null))}))})):"section"===e.show_type?newSections.forEach((function(t,_){-1!==e.values.indexOf(t.id)&&(newSections[_].hidden=!isMeet,isMeet||(clearValues[t.fields[0].name]=null))})):"presence_field"===e.show_type&&newSections.forEach((function(t,_){t.fields.forEach((function(t,n){-1!==e.values.indexOf(t.id)&&(newSections[_].fields[n].validations.presence=isMeet)}))}))})),[newSections,clearValues]}function thousandAbdDecimal(e){var t=Number(e),_="CN￥";return _+=t?t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"):"0.00"}function isMeetConditions(condition,condition_items,data,fields){if(!condition)return!1;var isMeet=!1,meets=[];if(condition_items.forEach((function(e){meets.push(isMeetCondition(e,data,fields))})),"AND"===condition.patten||!condition.patten&&!condition.custom_patten)isMeet=!0,meets.forEach((function(e){isMeet=isMeet&&e}));else if("OR"===condition.patten)meets.forEach((function(e){isMeet=isMeet||e}));else if(condition.custom_patten){var str=condition.custom_patten;meets.forEach((function(e,t){str=str.replaceAll("[".concat(t+1,"]"),e)})),str=str.replaceAll("OR","||").replaceAll("AND","&&");try{isMeet=!0===eval(str)}catch(e){console.log(condition,e),isMeet=!1}}return isMeet}function getSelectQuery(e,t,_){var n,a,r="",i=null==t?void 0:t.find((function(e){return e.active&&"Street"===e.api_name})),o=[];i&&i.value.forEach((function(e,t){o=o.concat(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},i),{},{"api_name":0===t?"Province":1===t?"City1":"Street","value":e}))}));var c=null==t?void 0:t.filter((function(e){return e.active&&"Street"!==e.api_name})).concat(o);null==c||c.forEach((function(e,t){1===c.length?"="===e.node.key||"!="===e.node.key?r+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):"like"===e.node.key||"not lik"===e.node.key?r+="(".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?r+="(".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?r+="(".concat(e.api_name," like '%").concat(e.value||"","')"):r+="(".concat(e.api_name," ").concat(e.node.key,")"):t===c.length-1?"="===e.node.key||"!="===e.node.key?r+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):("like"===e.node.key||"not lik"===e.node.key?r+="((".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?r+="((".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?r+="((".concat(e.api_name," like '%").concat(e.value||"","')"):r+="((".concat(e.api_name," ").concat(e.node.key,")"),r+=") "):("="===e.node.key||"!="===e.node.key?r+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):"like"===e.node.key||"not lik"===e.node.key?r+="((".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?r+="((".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?r+="((".concat(e.api_name," like '%").concat(e.value||"","')"):r+="((".concat(e.api_name," ").concat(e.node.key,")"),r+=" and ")}));var u="select "+(null===(n=_.find((function(t){return t.moduleName===e})))||void 0===n||null===(a=n.selects)||void 0===a?void 0:a.join(","));return null==c||c.forEach((function(){r+=")"})),u+=" from ".concat(e," where ").concat(r)}function getModuleText(e,t){var _={"name":"","description":"","phone":"","amount":0,"rating":""};switch(t){case"Leads":_.name=e.Company,_.description=e.Full_Name,_.rating=e.Rating,_.phone=e.Phone;break;case"Deals":_.name=e.Deal_Name,_.description=e.Stage,_.amount=e.Amount,_.rating=e.Rating,_.phone=e.phone;break;case"Accounts":_.name=e.Account_Name,_.description=e.Department,_.phone=e.Phone;break;case"Public_Leads":_.name=e.Name,_.description=e.Last_Name,_.phone=e.Phone,_.rating=e.Rating;break;case"TelephoneDevelopment":_.name=e.company_name||"",_.description=e.Name||"",_.phone=e.Phone||e.phone||"",_.rating=e.Rating||"";break;case"CompetitionInformationFeedback":_.name=e.Name||"",_.description=e.competition_model||"",_.rating=e.laser_brand||"";break;default:_.name=e.Name||"",_.description=e.Last_Name||"",_.phone=e.Phone||e.phone||"",_.rating=e.Rating||""}return _}},"162":function(e,t,_){"use strict";_.d(t,"a",(function(){return p}));var n=_(6),a=_(5),r=_(13),i=_(10),o=_(11),c=_(43),u=_(14),s=_(891),l=_(185),d=(Error,{"200":"服务器成功返回请求的数据。","201":"新建或修改数据成功。","202":"一个请求已经进入后台排队（异步任务）。","204":"删除数据成功。","400":"发出的请求有错误，服务器没有进行新建或修改数据的操作。","401":"用户没有权限（令牌、用户名、密码错误）。","403":"用户得到授权，但是访问是被禁止的。","404":"发出的请求针对的是不存在的记录，服务器没有进行操作。","406":"请求的格式不可得。","410":"请求的资源被永久删除，且不会再得到的。","422":"当创建一个对象时，发生一个验证错误。","500":"服务器发生错误，请检查服务器。","502":"网关错误。","503":"服务不可用，服务器暂时过载或维护。","504":"网关超时。"}),p=function(){function HttpClient(){Object(a.a)(this,HttpClient)}return Object(n.a)(HttpClient,null,[{"key":"parseResponse","value":function parseResponse(e){var t=e.data;return console.log("data",t),200===t.code||(t.tips=t.tips||(null==t?void 0:t.error)||d[t.code],t.tips&&s.b.error(t.tips)),t}},{"key":"get","value":function get(e,t){return l.a.get(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"put","value":function put(e,t){return l.a.put(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"delete","value":function _delete(e,t){return l.a.delete(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"post","value":function post(e,t,_){return l.a.post(e,t,_).then((function(e){return HttpClient.parseResponse(e)}))}}]),HttpClient}()},"170":function(e,t,_){"use strict";var n=_(16),a=_(22),r=_(169),i=_.n(r).a.create({"baseURL":"https://cloud.netfarmer.com.cn","timeout":3e4});i.interceptors.request.use((function(e){return new Promise(function(){var t=Object(a.a)(Object(n.a)().mark((function _callee(t){return Object(n.a)().wrap((function _callee$(_){for(;;)switch(_.prev=_.next){case 0:t(e);case 1:case"end":return _.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}())}),(function(e){return Promise.reject(e)})),t.a=i},"185":function(e,t,_){"use strict";var n=_(16),a=_(22),r=_(169),i=_.n(r),o=_(154),c=i.a.create({"baseURL":"https://cloud.netfarmer.com.cn","timeout":3e4});c.interceptors.request.use((function(e){return new Promise(function(){var t=Object(a.a)(Object(n.a)().mark((function _callee(t){var _,a;return Object(n.a)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!e.url){n.next=8;break}if(console.log(e.url),"/api/v1/functions/single_sign_on/execute"===e.url||"/oauth/token"===e.url){n.next=8;break}return n.next=5,Object(o.b)();case 5:_=n.sent,console.log("cToken",_),_&&(a={"Accept":"application/json","Authorization":_},e.headers=a);case 8:t(e);case 9:case"end":return n.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}())}),(function(e){return Promise.reject(e)})),t.a=c},"881":function(e,t,_){},"921":function(e,t,_){"use strict";_.r(t);var n=_(16),a=_(134),r=_(7),i=_(22),o=_(18),c=_(140),u=_(133),s=_(699),l=_(19),d=_(891),p=_(143),m=_(20),b=(_(881),_(162));function uploadLogo(e){return _uploadLogo.apply(this,arguments)}function _uploadLogo(){return(_uploadLogo=Object(i.a)(Object(n.a)().mark((function _callee(e){return Object(n.a)().wrap((function _callee$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",b.a.post("/api/v1/setting_manage/mobile_menus/upload_logo",e,{"headers":{"Content-Type":"multipart/form-data"}}));case 1:case"end":return t.stop()}}),_callee)})))).apply(this,arguments)}var f=_(136);t.default=function(){var e,t=null===(e=Object(u.b)().router)||void 0===e?void 0:e.params.id,_=Object(m.useState)(),b=Object(o.a)(_,2),h=b[0],O=b[1],E=Object(m.useState)(),k=Object(o.a)(E,2),g=k[0],M=k[1];Object(m.useEffect)((function(){!function getMenu(){var e=Object(s.a)("allmenus");e&&O(e.find((function(e){return e.id===t})))}()}),[]);var v=Object(m.useRef)(),j=Object(m.useState)(!1),D=Object(o.a)(j,2),y=D[0],P=D[1],w=function(){var e=Object(i.a)(Object(n.a)().mark((function _callee(e){var t;return Object(n.a)().wrap((function _callee$(_){for(;;)switch(_.prev=_.next){case 0:if(0!==(t=Object(r.a)(e.target.files)).length){_.next=3;break}return _.abrupt("return");case 3:return _.next=5,P(!0);case 5:t.map((function(e){var t=new FormData;e&&(t.append("file",e),t.append("id",g.id),uploadLogo(t).then((function(e){if(200===e.code&&e.data){d.b.success(g.name+"图标已更新");var t=e.data;O(Object(a.a)(Object(a.a)({},h),{},{"children":h.children.map((function(e){return e.id===t.id?Object(a.a)(Object(a.a)({},e),{},{"logo_url":t.logo_url}):Object(a.a)({},e)}))})),P(!1),M(void 0)}})))}));case 6:case"end":return _.stop()}}),_callee)})));return function handlePhoto(t){return e.apply(this,arguments)}}(),T=[{"text":Object(f.jsxs)(f.Fragment,{"children":[Object(f.jsx)("input",{"type":"file","ref":v,"hidden":!0,"accept":".jpg,.jpeg,.png","onChange":function onChange(e){return w(e)}}),Object(f.jsxs)("span",{"children":[y?"正在上传":"上传图标",y&&Object(f.jsx)(p.k,{})]})]}),"key":"camera"}];return Object(f.jsxs)(c.e,{"className":"management","children":[Object(f.jsx)(p.w,{"onBack":function onBack(){return Object(l.d)()},"children":"菜单管理"}),Object(f.jsx)(c.e,{"className":"management-content","children":h&&Object(f.jsxs)(c.e,{"className":"management-content-item","children":[Object(f.jsx)(c.d,{"className":"management-content-item-name","children":h.name}),Object(f.jsx)(c.e,{"className":"management-content-item-children","children":h.children.map((function(e){return Object(f.jsxs)(c.e,{"className":"management-content-item-children-app","onClick":function onClick(){return M(e)},"children":[e.logo_url?Object(f.jsx)(c.e,{"className":"management-content-item-children-app-icon","children":Object(f.jsx)(c.b,{"className":"management-content-item-children-app-icon-image","mode":"aspectFill","src":e.logo_url})}):Object(f.jsx)(c.e,{"className":"management-content-item-children-app-icon","children":Object(f.jsx)(c.d,{"children":e.name[0]})}),Object(f.jsx)(c.d,{"className":"management-content-item-children-app-name webkit-hidden1","children":e.name})]},e.id)}))})]})}),Object(f.jsx)(p.a,{"extra":"请选择修改图标方式","cancelText":"取消","visible":g,"actions":T,"onAction":function onAction(e){"camera"===e.key&&(y||v&&v.current.click())},"onClose":function onClose(){return M(void 0)}})]})}}}]);