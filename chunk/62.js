(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{"154":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"h",(function(){return getRules})),__webpack_require__.d(__webpack_exports__,"a",(function(){return calcFieldValue})),__webpack_require__.d(__webpack_exports__,"b",(function(){return getCloudToken})),__webpack_require__.d(__webpack_exports__,"j",(function(){return getZOHOtoken})),__webpack_require__.d(__webpack_exports__,"e",(function(){return getMeetStr})),__webpack_require__.d(__webpack_exports__,"f",(function(){return getMeetValueTip})),__webpack_require__.d(__webpack_exports__,"c",(function(){return getExecutionValueTip})),__webpack_require__.d(__webpack_exports__,"d",(function(){return getLayoutRuleResult})),__webpack_require__.d(__webpack_exports__,"l",(function(){return thousandAbdDecimal})),__webpack_require__.d(__webpack_exports__,"k",(function(){return isMeetConditions})),__webpack_require__.d(__webpack_exports__,"i",(function(){return getSelectQuery})),__webpack_require__.d(__webpack_exports__,"g",(function(){return getModuleText}));var _Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(7),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(16),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(22),_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(134),_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(699),_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(917),antd__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(891),dayjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(157),dayjs__WEBPACK_IMPORTED_MODULE_7___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_7__),_http_http__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(170);function getRules(e){var t=[];if(e.validations.presence){["Fields::TextField","Fields::TextAreaField","Fields::PercentField","Fields::IntegerField","Fields::DecimalField"].find((function(t){return t===e.type}))?t.push({"required":!0,"message":"请输入"+e.label}):t.push({"required":!0,"message":e.label+"为空"})}if(e.validations.length&&0!==e.validations.length.maximum&&t.push({"max":e.validations.length.maximum}),e.validations.numericality){var a={},n=0,i=0;"greater_than"===e.validations.numericality.lower_bound_check?(n=e.validations.numericality.lower_bound_value+1,a.min=n):"greater_than_or_equal_to"===e.validations.numericality.lower_bound_check&&(n=e.validations.numericality.lower_bound_value,a.min=n),"less_than"===e.validations.numericality.upper_bound_check?(i=e.validations.numericality.upper_bound_value-1,a.max=i):"less_than_or_equal_to"===e.validations.numericality.upper_bound_check&&(i=e.validations.numericality.upper_bound_value,a.max=i),a.message=e.label+"须在"+n+"-"+i+"之间",Object.keys(a).length>0&&t.push(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},a),{},{"type":"number"}))}return"Fields::EmailField"===e.type&&t.push({"type":"email","message":e.label+"不是一个有效的email"}),"Fields::LinkField"===e.type&&t.push({"type":"url","message":e.label+"不是一个有效的url"}),t}function calcFieldValue(formula,fields,data,sub_label,data_item){var newFormula=formula;console.log("fields",fields.label),fields.forEach((function(e){newFormula=sub_label&&data_item?newFormula.replace("/[".concat(sub_label,".").concat(e.label,"]/g"),data_item[e.name]&&data_item[e.name]._isAdayjsObject?dayjs__WEBPACK_IMPORTED_MODULE_7___default()(data_item[e.name]).format("YYYY-MM-DD"):data_item[e.name]||0):data[e.name]&&data[e.name]._isAdayjsObject?newFormula.replace("/[".concat(e.label,"]/g"),dayjs__WEBPACK_IMPORTED_MODULE_7___default()(data[e.name]).format("YYYY-MM-DD")):newFormula.replace("/[".concat(e.label,"]/g"),data[e.name]||("Fields::TextField"===e.type?"":0))}));try{var result=eval(newFormula);return console.log(newFormula,result),"number"==typeof result?Math.round(100*result)/100:result}catch(e){return console.log(newFormula,e),null}}function refreshCloudToken(e){return new Promise(function(){var t=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee(t,a){var n,i;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:n=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expires_in"),i=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("access_token"),console.log("accessToken",i),i&&"refresh_token"===e.grant_type&&(!n||dayjs__WEBPACK_IMPORTED_MODULE_7___default.a.unix(Number(n)).diff(dayjs__WEBPACK_IMPORTED_MODULE_7___default()(),"minute")>1)?t({"access_token":i}):_http_http__WEBPACK_IMPORTED_MODULE_8__.a.post("/oauth/token",e,{"headers":{"Accept":"application/json"}}).then((function(e){var a=e.data;a.refresh_token&&(Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"refresh_token","data":a.refresh_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"access_token","data":a.access_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"expires_in","data":a.created_at+a.expires_in})),t(a)})).catch((function(e){Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__.a)(),e.toString().indexOf("Request failed with status code 400")&&antd__WEBPACK_IMPORTED_MODULE_6__.b.error("token 过期, 请退出重新进入Zoho CRM")}));case 4:case"end":return a.stop()}}),_callee)})));return function(e,a){return t.apply(this,arguments)}}())}function getCloudToken(){return _getCloudToken.apply(this,arguments)}function _getCloudToken(){return(_getCloudToken=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee3(){var e,t,a,n;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee3$(i){for(;;)switch(i.prev=i.next){case 0:if(e=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expires_in"),t=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("access_token"),a=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("refresh_token"),!t||e&&!(dayjs__WEBPACK_IMPORTED_MODULE_7___default.a.unix(Number(e)).diff(dayjs__WEBPACK_IMPORTED_MODULE_7___default()(),"minute")>1)){i.next=5;break}return i.abrupt("return","Bearer ".concat(t));case 5:if(!a||"undefined"===a){i.next=10;break}return i.next=8,refreshCloudToken({"grant_type":"refresh_token","refresh_token":a}).then((function(e){return e?"Bearer ".concat(e.access_token):null}));case 8:return n=i.sent,i.abrupt("return",n);case 10:return i.abrupt("return",null);case 11:case"end":return i.stop()}}),_callee3)})))).apply(this,arguments)}function refreshZOHOToken(){return new Promise(function(){var e=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee2(e,t){var a;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee2$(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,getCloudToken();case 2:(a=n.sent)&&_http_http__WEBPACK_IMPORTED_MODULE_8__.a.post("/api/v1/functions/current_user_zoho_access_token/execute",{},{"headers":{"Authorization":a}}).then((function(a){if(200===a.data.code){var n=a.data.data.result;Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"zoho_access_token","data":n.zoho_access_token}),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.d)({"key":"expiration_time","data":n.expiration_time}),e(n)}else t()})).catch((function(e){antd__WEBPACK_IMPORTED_MODULE_6__.b.error("网络错误"),Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_5__.a)(),t()}));case 4:case"end":return n.stop()}}),_callee2)})));return function(t,a){return e.apply(this,arguments)}}())}function getZOHOtoken(){return _getZOHOtoken.apply(this,arguments)}function _getZOHOtoken(){return(_getZOHOtoken=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().mark((function _callee4(){var e,t,a;return Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_regeneratorRuntime__WEBPACK_IMPORTED_MODULE_1__.a)().wrap((function _callee4$(n){for(;;)switch(n.prev=n.next){case 0:if(e=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("zoho_access_token"),t=Object(_tarojs_taro__WEBPACK_IMPORTED_MODULE_4__.a)("expiration_time"),console.log("zoho_access_token",e),t&&!(t&&dayjs__WEBPACK_IMPORTED_MODULE_7___default()(t||0)<dayjs__WEBPACK_IMPORTED_MODULE_7___default()(new Date))){n.next=10;break}return n.next=6,refreshZOHOToken().then((function(e){return e?"".concat(e.zoho_access_token):null})).catch((function(){return null}));case 6:return a=n.sent,n.abrupt("return",a);case 10:return n.abrupt("return",e?"".concat(e):null);case 11:case"end":return n.stop()}}),_callee4)})))).apply(this,arguments)}function isDate(e){return!!new RegExp(/^[1-9]\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])\s+(20|21|22|23|[0-1]\d):[0-5]\d:[0-5]\d$/).test(e)}function initSearchCondition(e){var t=[];return(e||[]).forEach((function(e){var a={};a.id=e.id,a.field_id=e.field_id,a.criteria_option=e.criteria_option,a.criteria_value=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(e.criteria_value),a.show_field_condition=e.show_field_condition,e.criteria_value[0]&&isDate(e.criteria_value[0])&&(a.criteria_value[0]=dayjs__WEBPACK_IMPORTED_MODULE_7___default()(e.criteria_value[0])),e.criteria_value[1]&&isDate(e.criteria_value[1])&&(a.criteria_value[1]=dayjs__WEBPACK_IMPORTED_MODULE_7___default()(e.criteria_value[1])),t.push(a)})),t}function getMeetStr(e){var t="满";return e.ladder_promotion||("product"===e.category&&"buy_and_give"===e.promotion_rule?t="每满":"combined"===e.category?("buy_and_give"===e.promotion_rule||"amount"===e.promotion_type&&"direct_reduction"===e.promotion_rule)&&(t="每满"):"whole_order"===e.category&&"discount"!==e.promotion_rule&&(t="每满")),t}function getMeetValueTip(e){return"buy_and_give"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，赠送"):"direct_reduction"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，").concat("product"!==e.category&&"amount"===e.promotion_type?"订单金额减":"订货价统一降至"):"discount"===e.promotion_rule?"".concat("amount"===e.promotion_type?"元":"","，").concat("product"!==e.category&&"amount"===e.promotion_type?"订单金额打折":"在原订货价基础上再打折"):null}function getExecutionValueTip(e){return"buy_and_give"===e.promotion_rule?"个":"direct_reduction"===e.promotion_rule?"元":"discount"===e.promotion_rule?"%":null}function isMeetCondition(e,t,a){var n=a.filter((function(t){return t.id===e.field_id}))[0];if(!n)return!1;if(null!=n&&n.name){var i=t[null==n?void 0:n.name];if(-1!==["IS","ON","EQ"].indexOf(e.criteria_option)&&i===e.criteria_value[0]||-1!==["ISNT","NOT_EQ"].indexOf(e.criteria_option)&&i!==e.criteria_value[0]||"IN"===e.criteria_option&&-1!==(e.criteria_value[0]||[]).indexOf(i)||"NOT_IN"===e.criteria_option&&-1===(e.criteria_value[0]||[]).indexOf(i)||"CONTAINS"===e.criteria_option&&-1!==String(i).indexOf(e.criteria_value[0])||"DOESNT_CONTAINS"===e.criteria_option&&-1===String(i).indexOf(e.criteria_value[0])||"ARRAY_CONTAINS"===e.criteria_option&&-1!==(i||[]).indexOf(e.criteria_value[0])||"ARRAY_DOESNT_CONTAINS"===e.criteria_option&&-1===(i||[]).indexOf(e.criteria_value[0])||"STARTS_WITH"===e.criteria_option&&String(i).startsWith(e.criteria_value[0])||"ENDS_WITH"===e.criteria_option&&String(i).endsWith(e.criteria_value[0])||"IS_EMPTY"===e.criteria_option&&-1!==["","null","undefined"].indexOf(String(i))||"IS_NOT_EMPTY"===e.criteria_option&&-1===["","null","undefined"].indexOf(String(i))||"BETWEEN"===e.criteria_option&&i>=e.criteria_value[0]&&i<=e.criteria_value[1]||"NOT_BETWEEN"===e.criteria_option&&i<e.criteria_value[0]&&i>e.criteria_value[1]||-1!==["BEFORE","LT"].indexOf(e.criteria_option)&&i<e.criteria_value[0]||"LTEQ"===e.criteria_option&&i<=e.criteria_value[0]||-1!==["AFTER","GT"].indexOf(e.criteria_option)&&i>e.criteria_value[0]||"GTEQ"===e.criteria_option&&i>=e.criteria_value[0]||"SELECTED"===e.criteria_option&&!0===i||"NOT_SELECTED"===e.criteria_option&&!1===i)return!0}return!1}function getLayoutRuleResult(layoutRule,allValues,sections){var isMeet=!1,fields=sections.map((function(e){return e.fields})).flat(),meets=[];if(layoutRule.conditions.forEach((function(e){meets.push(isMeetCondition(e,allValues,fields))})),"AND"===layoutRule.patten||!layoutRule.patten&&!layoutRule.custom_patten)isMeet=!0,meets.forEach((function(e){isMeet=isMeet&&e}));else if("OR"===layoutRule.patten)meets.forEach((function(e){isMeet=isMeet||e}));else if(layoutRule.custom_patten){var str=layoutRule.custom_patten;meets.forEach((function(e,t){str=str.replace("[".concat(t+1,"]"),e)})),console.log(str),str=str.replace(/OR/g,"||").replace(/AND/g,"&&"),console.log("str=======>",str);try{isMeet=!0===eval(str)}catch(e){console.log(layoutRule,e),isMeet=!1}}var newSections=Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__.a)(sections),clearValues={};return layoutRule.actions.forEach((function(e){"field"===e.show_type?newSections.forEach((function(t,a){t.fields.forEach((function(t,n){-1!==e.values.indexOf(t.id)&&(newSections[a].fields[n].hidden=!isMeet,isMeet||(clearValues[newSections[a].fields[n].name]=null))}))})):"section"===e.show_type?newSections.forEach((function(t,a){-1!==e.values.indexOf(t.id)&&(newSections[a].hidden=!isMeet,isMeet||(clearValues[t.fields[0].name]=null))})):"presence_field"===e.show_type&&newSections.forEach((function(t,a){t.fields.forEach((function(t,n){-1!==e.values.indexOf(t.id)&&(newSections[a].fields[n].validations.presence=isMeet)}))}))})),[newSections,clearValues]}function thousandAbdDecimal(e){var t=Number(e),a="CN￥";return a+=t?t.toFixed(2).replace(/(\d)(?=(\d{3})+\.)/g,"$1,"):"0.00"}function isMeetConditions(condition,condition_items,data,fields){if(!condition)return!1;var isMeet=!1,meets=[];if(condition_items.forEach((function(e){meets.push(isMeetCondition(e,data,fields))})),"AND"===condition.patten||!condition.patten&&!condition.custom_patten)isMeet=!0,meets.forEach((function(e){isMeet=isMeet&&e}));else if("OR"===condition.patten)meets.forEach((function(e){isMeet=isMeet||e}));else if(condition.custom_patten){var str=condition.custom_patten;meets.forEach((function(e,t){str=str.replaceAll("[".concat(t+1,"]"),e)})),str=str.replaceAll("OR","||").replaceAll("AND","&&");try{isMeet=!0===eval(str)}catch(e){console.log(condition,e),isMeet=!1}}return isMeet}function getSelectQuery(e,t,a){var n,i,o="",r=null==t?void 0:t.find((function(e){return e.active&&"Street"===e.api_name})),c=[];r&&r.value.forEach((function(e,t){c=c.concat(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)(Object(_Users_caiqianghui_work_Github_ibodor_h5_node_modules_babel_runtime_helpers_esm_objectSpread2__WEBPACK_IMPORTED_MODULE_3__.a)({},r),{},{"api_name":0===t?"Province":1===t?"City1":"Street","value":e}))}));var _=null==t?void 0:t.filter((function(e){return e.active&&"Street"!==e.api_name})).concat(c);null==_||_.forEach((function(e,t){1===_.length?"="===e.node.key||"!="===e.node.key?o+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):"like"===e.node.key||"not lik"===e.node.key?o+="(".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?o+="(".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?o+="(".concat(e.api_name," like '%").concat(e.value||"","')"):o+="(".concat(e.api_name," ").concat(e.node.key,")"):t===_.length-1?"="===e.node.key||"!="===e.node.key?o+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):("like"===e.node.key||"not lik"===e.node.key?o+="((".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?o+="((".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?o+="((".concat(e.api_name," like '%").concat(e.value||"","')"):o+="((".concat(e.api_name," ").concat(e.node.key,")"),o+=") "):("="===e.node.key||"!="===e.node.key?o+="((".concat(e.api_name," ").concat(e.node.key," '").concat(e.value||"","')"):"like"===e.node.key||"not lik"===e.node.key?o+="((".concat(e.api_name," ").concat(e.node.key," '%").concat(e.value||"","%')"):"starts_with"===e.node.key?o+="((".concat(e.api_name," like '").concat(e.value||"","%')"):"ends_with"===e.node.key?o+="((".concat(e.api_name," like '%").concat(e.value||"","')"):o+="((".concat(e.api_name," ").concat(e.node.key,")"),o+=" and ")}));var l="select "+(null===(n=a.find((function(t){return t.moduleName===e})))||void 0===n||null===(i=n.selects)||void 0===i?void 0:i.join(","));return null==_||_.forEach((function(){o+=")"})),l+=" from ".concat(e," where ").concat(o)}function getModuleText(e,t){var a={"name":"","description":"","phone":"","amount":0,"rating":""};switch(t){case"Leads":a.name=e.Company,a.description=e.Full_Name,a.rating=e.Rating,a.phone=e.Phone;break;case"Deals":a.name=e.Deal_Name,a.description=e.Stage,a.amount=e.Amount,a.rating=e.Rating,a.phone=e.phone;break;case"Accounts":a.name=e.Account_Name,a.description=e.Department,a.phone=e.Phone;break;case"Public_Leads":a.name=e.Name,a.description=e.Last_Name,a.phone=e.Phone,a.rating=e.Rating;break;case"TelephoneDevelopment":a.name=e.company_name||"",a.description=e.Name||"",a.phone=e.Phone||e.phone||"",a.rating=e.Rating||"";break;case"CompetitionInformationFeedback":a.name=e.Name||"",a.description=e.competition_model||"",a.rating=e.laser_brand||"";break;default:a.name=e.Name||"",a.description=e.Last_Name||"",a.phone=e.Phone||e.phone||"",a.rating=e.Rating||""}return a}},"162":function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(6),i=a(5),o=a(13),r=a(10),c=a(11),_=a(43),l=a(14),s=a(891),u=a(185),d=(Error,{"200":"服务器成功返回请求的数据。","201":"新建或修改数据成功。","202":"一个请求已经进入后台排队（异步任务）。","204":"删除数据成功。","400":"发出的请求有错误，服务器没有进行新建或修改数据的操作。","401":"用户没有权限（令牌、用户名、密码错误）。","403":"用户得到授权，但是访问是被禁止的。","404":"发出的请求针对的是不存在的记录，服务器没有进行操作。","406":"请求的格式不可得。","410":"请求的资源被永久删除，且不会再得到的。","422":"当创建一个对象时，发生一个验证错误。","500":"服务器发生错误，请检查服务器。","502":"网关错误。","503":"服务不可用，服务器暂时过载或维护。","504":"网关超时。"}),m=function(){function HttpClient(){Object(i.a)(this,HttpClient)}return Object(n.a)(HttpClient,null,[{"key":"parseResponse","value":function parseResponse(e){var t=e.data;return console.log("data",t),200===t.code||(t.tips=t.tips||(null==t?void 0:t.error)||d[t.code],t.tips&&s.b.error(t.tips)),t}},{"key":"get","value":function get(e,t){return u.a.get(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"put","value":function put(e,t){return u.a.put(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"delete","value":function _delete(e,t){return u.a.delete(e,t).then((function(e){return HttpClient.parseResponse(e)}))}},{"key":"post","value":function post(e,t,a){return u.a.post(e,t,a).then((function(e){return HttpClient.parseResponse(e)}))}}]),HttpClient}()},"170":function(e,t,a){"use strict";var n=a(16),i=a(22),o=a(169),r=a.n(o).a.create({"baseURL":"https://cloud.netfarmer.com.cn","timeout":3e4});r.interceptors.request.use((function(e){return new Promise(function(){var t=Object(i.a)(Object(n.a)().mark((function _callee(t){return Object(n.a)().wrap((function _callee$(a){for(;;)switch(a.prev=a.next){case 0:t(e);case 1:case"end":return a.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}())}),(function(e){return Promise.reject(e)})),t.a=r},"185":function(e,t,a){"use strict";var n=a(16),i=a(22),o=a(169),r=a.n(o),c=a(154),_=r.a.create({"baseURL":"https://cloud.netfarmer.com.cn","timeout":3e4});_.interceptors.request.use((function(e){return new Promise(function(){var t=Object(i.a)(Object(n.a)().mark((function _callee(t){var a,i;return Object(n.a)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:if(!e.url){n.next=8;break}if(console.log(e.url),"/api/v1/functions/single_sign_on/execute"===e.url||"/oauth/token"===e.url){n.next=8;break}return n.next=5,Object(c.b)();case 5:a=n.sent,console.log("cToken",a),a&&(i={"Accept":"application/json","Authorization":a},e.headers=i);case 8:t(e);case 9:case"end":return n.stop()}}),_callee)})));return function(e){return t.apply(this,arguments)}}())}),(function(e){return Promise.reject(e)})),t.a=_},"187":function(e,t,a){"use strict";t.a={"ltcMenu":{"category":"menu","name":"L T C","children":[{"category":"sub_menu","type":"crm","id":"181037000075716763","name":"线索","moduleName":"Leads","pathname":"zoho/list","permissions":!1,"btns":[{"key":"topublicleads1","text":"丢入公海"}],"selects":["Company","Full_Name","Phone","Release_Time"],"screenLayout":[{"api_name":"Rating","field_label":"等级","active":!1,"value":"","type":""},{"api_name":"Last_Name","field_label":"客户联系人","active":!1,"value":"","type":""},{"api_name":"Lead_Source","field_label":"线索来源","active":!1,"value":"","type":""},{"api_name":"Owner","field_label":"线索所有者","active":!1,"value":"","type":""},{"api_name":"Street","field_label":"省/市/区/县","active":!1,"value":"","type":""},{"api_name":"Region","field_label":"客户所属大区","active":!1,"value":"","type":""},{"api_name":"Account_Department","field_label":"客户所属部门","active":!1,"value":"","type":""},{"api_name":"War_Zone","field_label":"客户所属战区","active":!1,"value":"","type":""},{"api_name":"Claimed","field_label":"被申领的线索","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"Release_Time","field_label":"释放日期"},{"api_name":"Rating","field_label":"等级"},{"api_name":"Account_Name","field_label":"客户名称"},{"api_name":"Last_Name","field_label":"客户联系人"},{"api_name":"Lead_Source","field_label":"线索来源"},{"api_name":"Owner","field_label":"线索所有者"},{"api_name":"Last_Activity_Time","field_label":"最近操作时间"}]},{"category":"sub_menu","type":"crm","id":"181037000000060547","permissions":!1,"name":"商机","moduleName":"Deals","pathname":"zoho/list","selects":["Deal_Name","Stage","Amount","Rating","phone"],"screenLayout":[{"api_name":"Deal_Name","field_label":"商机名称","active":!1,"value":"","type":""},{"api_name":"Account_Name","field_label":"客户名称","active":!1,"value":"","type":""},{"api_name":"Stage","field_label":"阶段","active":!1,"value":"","type":""},{"api_name":"Rating","field_label":"等级","active":!1,"value":"","type":""},{"api_name":"Owner","field_label":"商机所有者","active":!1,"value":"","type":""},{"api_name":"Lead_Source","field_label":"线索来源","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"Deal_Name","field_label":"商机名称"},{"api_name":"Account_Name","field_label":"客户名称"},{"api_name":"Stage","field_label":"阶段"},{"api_name":"Rating","field_label":"等级"},{"api_name":"Owner","field_label":"商机所有者"},{"api_name":"Lead_Source","field_label":"线索来源"},{"api_name":"Last_Activity_Time","field_label":"最近操作时间"}]},{"category":"sub_menu","type":"crm","id":"181037000000060567","permissions":!1,"name":"客户","moduleName":"Accounts","pathname":"zoho/list","selects":["Account_Name","Department","Phone"],"screenLayout":[{"api_name":"Account_Name","field_label":"客户名称","active":!1,"value":"","type":""},{"api_name":"Account_Code","field_label":"客户代码","active":!1,"value":"","type":""},{"api_name":"Phone","field_label":"电话","active":!1,"value":"","type":""},{"api_name":"SAP_Code","field_label":"SAP客户标识","active":!1,"value":"","type":""},{"api_name":"Street","field_label":"区/县","active":!1,"value":"","type":""},{"api_name":"Account_Source","field_label":"客户来源","active":!1,"value":"","type":""},{"api_name":"Region","field_label":"客户所属大区","active":!1,"value":"","type":""},{"api_name":"Department","field_label":"客户所属部门","active":!1,"value":"","type":""},{"api_name":"War_Zone","field_label":"客户所属战区","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"Account_Name","field_label":"客户名称"},{"api_name":"Account_Code","field_label":"客户代码"},{"api_name":"Phone","field_label":"电话"},{"api_name":"SAP_Code","field_label":"SAP客户标识"},{"api_name":"Province","field_label":"省"},{"api_name":"District","field_label":"市"},{"api_name":"Account_Source","field_label":"客户来源"}]},{"category":"sub_menu","type":"crm","id":"181037000000299602","permissions":!1,"name":"线索公海","moduleName":"Public_Leads","pathname":"zoho/list","btns":[{"key":"clueclaim1","text":"线索申领"}],"selects":["Name","Last_Name","Phone","Rating"],"screenLayout":[{"api_name":"Rating","field_label":"等级","active":!1,"value":"","type":""},{"api_name":"Last_Name","field_label":"客户联系人","active":!1,"value":"","type":""},{"api_name":"Lead_Source","field_label":"线索来源","active":!1,"value":"","type":""},{"api_name":"Owner","field_label":"线索所有者","active":!1,"value":"","type":""},{"api_name":"Street","field_label":"区/县","active":!1,"value":"","type":""},{"api_name":"Region","field_label":"客户所属大区","active":!1,"value":"","type":""},{"api_name":"Account_Department","field_label":"客户所属部门","active":!1,"value":"","type":""},{"api_name":"War_Zone","field_label":"客户所属战区","active":!1,"value":"","type":""},{"api_name":"Claimed","field_label":"被申领的线索","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"Release_Time","field_label":"释放日期"},{"api_name":"Rating","field_label":"等级"},{"api_name":"Account_Name","field_label":"客户名称"},{"api_name":"Last_Name","field_label":"客户联系人"},{"api_name":"Lead_Source","field_label":"线索来源"},{"api_name":"Owner","field_label":"线索所有者"},{"api_name":"Last_Activity_Time","field_label":"最近操作时间"}]},{"category":"sub_menu","id":"181037000000299603","name":"签到","moduleName":"signin","type":"crm","pathname":"cloud/signin","path":"signin"},{"category":"sub_menu","id":"18103700000299603","name":"客户查重","moduleName":"accounts_h","pathname":"zoho/accounts_h","type":"crm"},{"category":"sub_menu","id":"1811111111231341119603","name":"电话开发","type":"crm","permissions":!1,"moduleName":"TelephoneDevelopment","pathname":"zoho/list","selects":["company_name","Name","phone","Owner","status","Last_dialed_time "],"btns":[{"key":"delete","text":"删除"}],"screenLayout":[{"api_name":"status","field_label":"状态","active":!0,"value":"未拨打","type":"="},{"api_name":"Name","field_label":"名字","active":!1,"value":"","type":""},{"api_name":"phone","field_label":"电话","active":!1,"value":"","type":""},{"api_name":"Owner","field_label":"电话开发所有者","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"status","field_label":"状态"},{"api_name":"Last_dialed_time","field_label":"最近拨打时间"},{"api_name":"Name","field_label":"名字"},{"api_name":"phone","field_label":"电话"}]},{"category":"sub_menu","id":"181037000120484793","name":"竞品价格反馈","type":"crm","moduleName":"CompetitionInformationFeedback","permissions":!1,"pathname":"zoho/Information_h","selects":["Name","laser_brand","payment_method","competition_model","Owner","main_configuration_description "],"screenLayout":[{"api_name":"Name","field_label":"竞品名称","active":!1,"value":"","type":"="},{"api_name":"competition_power","field_label":"竞品功率","active":!1,"value":"","type":""},{"api_name":"final_transaction_price","field_label":"最终成交价","active":!1,"value":"","type":""},{"api_name":"warranty_period","field_label":"质保年限","active":!1,"value":"","type":""}],"sortFields":[{"api_name":"Name","field_label":"竞品名称"},{"api_name":"competition_power","field_label":"竞品功率"},{"api_name":"final_transaction_price","field_label":"最终成交价"},{"api_name":"warranty_period","field_label":"质保年限"}]}]},"ctoMenu":{"category":"menu","name":"C T O","children":[{"category":"sub_menu","name":"合同","permissions":!0,"type":"cloud","moduleName":"Contracts","pathname":"cloud/list","isNew":!1,"isAdmin":!1},{"category":"sub_menu","name":"销售订单","type":"cloud","permissions":!0,"moduleName":"SalesOrder","pathname":"cloud/list","isNew":!0,"isAdmin":!0},{"category":"sub_menu","name":"接待打样","type":"cloud","permissions":!0,"moduleName":"ReceptionProofing","pathname":"cloud/list","isNew":!0,"isAdmin":!0},{"category":"sub_menu","name":"整机发货单","type":"cloud","permissions":!0,"moduleName":"ModelInvoiceOrder","pathname":"cloud/list","isNew":!1,"isAdmin":!0},{"category":"sub_menu","name":"整机退换货","type":"cloud","permissions":!0,"moduleName":"ModelReturnOrder","pathname":"cloud/list","isNew":!1,"isAdmin":!0},{"category":"sub_menu","name":"合同授信","type":"cloud","permissions":!0,"moduleName":"AccountCredit","pathname":"cloud/list","isNew":!0,"isAdmin":!0},{"category":"sub_menu","name":"配件商城优惠券","type":"cloud","permissions":!0,"moduleName":"PartsMallCoupons","pathname":"cloud/list","isNew":!0,"isAdmin":!0},{"category":"sub_menu","name":"非标整机","type":"cloud","permissions":!0,"moduleName":"Non_Standard_Quotation","pathname":"cloud/list","isNew":!0,"isAdmin":!0}]},"signInTypes":[{"label":"拜访B+商机/线索","value":"拜访B+商机/线索","color":"#ec2c64"},{"label":"拜访询盘客户","value":"拜访询盘客户","color":"#584717"},{"label":"拜访其他客户","value":"拜访其他客户","color":"#7e1671"},{"label":"拜访竞品客户","value":"拜访竞品客户","color":"#5cb3cc"},{"label":"陌拜开发","value":"陌拜开发","color":"#69a794"},{"label":"展会开发","value":"展会开发","color":"#d0deaa"},{"label":"回访-自己老客户","value":"回访-自己老客户","color":"#de7622"},{"label":"回访-同事老客户","value":"回访-同事老客户","color":"#69a794"},{"label":"陪同拜访/开发","value":"陪同拜访/开发","color":"#3170a7"}],"signInMoudles":[{"label":"线索","value":"Leads","disabled":!1},{"label":"商机","value":"Deals","disabled":!1},{"label":"线索公海","value":"Public_Leads","disabled":!1}],"dealsBlueprint":[{"label":"资质审查","icon":null,"key":"1","color":"#e972fd"},{"label":"需求分析","icon":null,"key":"2","color":"#4137be"},{"label":"决策体系","icon":null,"key":"3","color":"#fea36a"},{"label":"合约过程","icon":null,"key":"4","color":"#999999"},{"label":"赢单关闭","icon":"LikeOutline","key":"5","color":"#25b52a"},{"label":"丢单关闭","icon":"LikeOutline","key":"6","color":"#eb4d4d"},{"label":"客户计划变更","icon":"LikeOutline","key":"7","color":"#e972fd"}]}},"245":function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(5),i=a(6),o=a(162),r=a(917),c=function(){function HttpLoading(){Object(n.a)(this,HttpLoading)}return Object(i.a)(HttpLoading,null,[{"key":"get","value":function get(e,t){return Object(r.b)(),o.a.get(e,t).then((function(e){return Object(r.a)(),e})).catch((function(e){return Object(r.a)(),Promise.reject(e)}))}},{"key":"put","value":function put(e,t){return Object(r.b)(),o.a.put(e,t).then((function(e){return Object(r.a)(),e})).catch((function(e){return Object(r.a)(),Promise.reject(e)}))}},{"key":"post","value":function post(e,t,a){return Object(r.b)(),o.a.post(e,t,a).then((function(e){return Object(r.a)(),console.log("HttpLoading.posr-then",e),Promise.resolve(e)})).catch((function(e){return console.log("post",e),Object(r.a)(),Promise.reject(e)}))}}]),HttpLoading}()},"466":function(e,t,a){"use strict";a.d(t,"e",(function(){return getDataById})),a.d(t,"f",(function(){return getFieldMapDependencies})),a.d(t,"k",(function(){return uploadAttachment})),a.d(t,"h",(function(){return getSubRows})),a.d(t,"c",(function(){return deleteAttachment})),a.d(t,"b",(function(){return createData})),a.d(t,"j",(function(){return invokeValidateFunction})),a.d(t,"d",(function(){return getCustomFormJs})),a.d(t,"g",(function(){return getLayoutRules})),a.d(t,"i",(function(){return invokeLinkageFunction})),a.d(t,"a",(function(){return cloneAttachment}));var n=a(16),i=a(22),o=a(162);function getDataById(e,t){return _getDataById.apply(this,arguments)}function _getDataById(){return(_getDataById=Object(i.a)(Object(n.a)().mark((function _callee(e,t){var a,i=arguments;return Object(n.a)().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:{},n.abrupt("return",o.a.get("/api/v1/".concat(e,"/").concat(t),{"params":a}));case 2:case"end":return n.stop()}}),_callee)})))).apply(this,arguments)}function getFieldMapDependencies(e){return _getFieldMapDependencies.apply(this,arguments)}function _getFieldMapDependencies(){return(_getFieldMapDependencies=Object(i.a)(Object(n.a)().mark((function _callee3(e){return Object(n.a)().wrap((function _callee3$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.get("/api/v1/custom_form/field_map_dependencies",{"params":e}));case 1:case"end":return t.stop()}}),_callee3)})))).apply(this,arguments)}function uploadAttachment(e){return _uploadAttachment.apply(this,arguments)}function _uploadAttachment(){return(_uploadAttachment=Object(i.a)(Object(n.a)().mark((function _callee5(e){var t,a=arguments;return Object(n.a)().wrap((function _callee5$(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},n.abrupt("return",o.a.post("/api/v1/".concat(e,"/upload_attachment"),t,{"headers":{"Content-Type":"multipart/form-data"}}));case 2:case"end":return n.stop()}}),_callee5)})))).apply(this,arguments)}function getSubRows(e,t){return _getSubRows.apply(this,arguments)}function _getSubRows(){return(_getSubRows=Object(i.a)(Object(n.a)().mark((function _callee6(e,t){return Object(n.a)().wrap((function _callee6$(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.get("/api/v1/".concat(e,"/sub_rows"),{"params":t}));case 1:case"end":return a.stop()}}),_callee6)})))).apply(this,arguments)}function deleteAttachment(e){return _deleteAttachment.apply(this,arguments)}function _deleteAttachment(){return(_deleteAttachment=Object(i.a)(Object(n.a)().mark((function _callee7(e){var t,a=arguments;return Object(n.a)().wrap((function _callee7$(n){for(;;)switch(n.prev=n.next){case 0:return t=a.length>1&&void 0!==a[1]?a[1]:{},n.abrupt("return",o.a.delete("/api/v1/attachment_manage/attachments/".concat(e),{"params":t}));case 2:case"end":return n.stop()}}),_callee7)})))).apply(this,arguments)}function createData(e,t){return _createData.apply(this,arguments)}function _createData(){return(_createData=Object(i.a)(Object(n.a)().mark((function _callee9(e,t){return Object(n.a)().wrap((function _callee9$(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.post("/api/v1/".concat(e),t));case 1:case"end":return a.stop()}}),_callee9)})))).apply(this,arguments)}function invokeValidateFunction(e){return _invokeValidateFunction.apply(this,arguments)}function _invokeValidateFunction(){return(_invokeValidateFunction=Object(i.a)(Object(n.a)().mark((function _callee10(e){return Object(n.a)().wrap((function _callee10$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.post("/api/v1/extension_manage/custom_functions/exec_validate_function",e));case 1:case"end":return t.stop()}}),_callee10)})))).apply(this,arguments)}function getCustomFormJs(e){return _getCustomFormJs.apply(this,arguments)}function _getCustomFormJs(){return(_getCustomFormJs=Object(i.a)(Object(n.a)().mark((function _callee11(e){return Object(n.a)().wrap((function _callee11$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.get("/api/v1/extension_manage/custom_functions/custom_form_js",{"params":e}));case 1:case"end":return t.stop()}}),_callee11)})))).apply(this,arguments)}function getLayoutRules(e){return _getLayoutRules.apply(this,arguments)}function _getLayoutRules(){return(_getLayoutRules=Object(i.a)(Object(n.a)().mark((function _callee12(e){return Object(n.a)().wrap((function _callee12$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.get("/api/v1/custom_form/layout_rules/list",{"params":e}));case 1:case"end":return t.stop()}}),_callee12)})))).apply(this,arguments)}function invokeLinkageFunction(e){return _invokeLinkageFunction.apply(this,arguments)}function _invokeLinkageFunction(){return(_invokeLinkageFunction=Object(i.a)(Object(n.a)().mark((function _callee13(e){return Object(n.a)().wrap((function _callee13$(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",o.a.post("/api/v1/extension_manage/custom_functions/exec_linkage_function",e));case 1:case"end":return t.stop()}}),_callee13)})))).apply(this,arguments)}function cloneAttachment(e,t){return _cloneAttachment.apply(this,arguments)}function _cloneAttachment(){return(_cloneAttachment=Object(i.a)(Object(n.a)().mark((function _callee15(e,t){return Object(n.a)().wrap((function _callee15$(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",o.a.post("/api/v1/".concat(e,"/clone_attachment"),t));case 1:case"end":return a.stop()}}),_callee15)})))).apply(this,arguments)}},"541":function(e,t,a){"use strict";var n=a(18),i=a(140),o=a(143),r=a(20);var c=function CloseCircleOutline(e){return r.createElement("svg",Object.assign({"width":"1em","height":"1em","viewBox":"0 0 48 48","xmlns":"http://www.w3.org/2000/svg","xmlnsXlink":"http://www.w3.org/1999/xlink"},e,{"style":Object.assign({"verticalAlign":"-0.125em"},e.style),"className":["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),r.createElement("g",{"id":"CloseCircleOutline-CloseCircleOutline","stroke":"none","strokeWidth":1,"fill":"none","fillRule":"evenodd"},r.createElement("g",{"id":"CloseCircleOutline-编组"},r.createElement("rect",{"id":"CloseCircleOutline-矩形","fill":"#FFFFFF","opacity":0,"x":0,"y":0,"width":48,"height":48}),r.createElement("path",{"d":"M24,2 C36.1502645,2 46,11.8497355 46,24 C46,36.1502645 36.1502645,46 24,46 C11.8497355,46 2,36.1502645 2,24 C2,11.8497355 11.8497355,2 24,2 Z M24,5 C13.5065898,5 5,13.5065898 5,24 C5,34.4934102 13.5065898,43 24,43 C34.4934102,43 43,34.4934102 43,24 C43,13.5065898 34.4934102,5 24,5 Z M18.3750018,16.1171551 L23.9998449,21.7419127 L23.9998449,21.7419127 L29.624688,16.1171551 C29.6997023,16.0421419 29.801443,16 29.9075285,16 L33.0200651,16 C33.240979,16 33.4200651,16.1790861 33.4200651,16.4 C33.4200651,16.5060962 33.3779147,16.6078461 33.3028882,16.6828623 L26.1208449,23.8639127 L26.1208449,23.8639127 L33.5750057,31.3171396 C33.7312252,31.4733395 33.731241,31.7266055 33.5750411,31.882825 C33.5000251,31.9578504 33.398276,32 33.2921807,32 L30.1796562,32 C30.0735583,32 29.9718069,31.9578483 29.8967904,31.8828197 L23.9998449,25.9849127 L23.9998449,25.9849127 L18.1011057,31.8828617 C18.0260927,31.9578646 17.9243593,32 17.8182819,32 L14.7076208,32 C14.4867069,32 14.3076208,31.8209139 14.3076208,31.6 C14.3076208,31.4939151 14.3497622,31.3921749 14.4247747,31.3171607 L21.8778449,23.8639127 L21.8778449,23.8639127 L14.6966968,16.6828443 C14.5404862,16.5266354 14.5404848,16.2733694 14.6966936,16.1171589 C14.7717083,16.0421433 14.8734505,16 14.9795379,16 L18.0921612,16 C18.1982468,16 18.2999874,16.0421419 18.3750018,16.1171551 Z","id":"CloseCircleOutline-形状","fill":"currentColor","fillRule":"nonzero"}))))},_=a(136);t.a=function(e){var t=e.thumb_url,a=e.url,l=e.style,s=e.className,u=e.onDelete,d=Object(r.useState)(!1),m=Object(n.a)(d,2),p=m[0],b=m[1];return Object(_.jsxs)(_.Fragment,{"children":[Object(_.jsxs)(i.e,{"style":{"position":"relative"},"children":[Object(_.jsx)(o.o,{"className":s,"style":l,"fit":"cover","lazy":!0,"src":t||a,"onClick":function onClick(){b(!0)}}),u&&Object(_.jsx)(i.e,{"className":"image-delete-icon","onClick":function onClick(){return u(a)},"children":Object(_.jsx)(c,{"fontSize":16})})]}),Object(_.jsx)(o.p,{"image":a,"visible":p,"onClose":function onClose(){b(!1)}})]})}},"599":function(e,t,a){"use strict";var n=a(20);t.a=function EnvironmentOutline(e){return n.createElement("svg",Object.assign({"width":"1em","height":"1em","viewBox":"0 0 48 48","xmlns":"http://www.w3.org/2000/svg","xmlnsXlink":"http://www.w3.org/1999/xlink"},e,{"style":Object.assign({"verticalAlign":"-0.125em"},e.style),"className":["antd-mobile-icon",e.className].filter(Boolean).join(" ")}),n.createElement("g",{"id":"EnvironmentOutline-EnvironmentOutline","stroke":"none","strokeWidth":1,"fill":"none","fillRule":"evenodd"},n.createElement("g",{"id":"EnvironmentOutline-编组"},n.createElement("rect",{"id":"EnvironmentOutline-矩形","fill":"#FFFFFF","opacity":0,"x":0,"y":0,"width":48,"height":48}),n.createElement("path",{"d":"M24,3.5 C33.9411255,3.5 42,11.5788332 42,21.5445791 C42,25.9993411 40.3897111,30.0770685 37.7208235,33.2247049 L37.2250176,33.7978077 C35.2208664,36.0735085 31.7308408,39.6031944 26.7549407,44.3868657 C25.2643222,45.8198986 22.9549789,45.8692779 21.4079378,44.5350287 L21.2451724,44.3867789 L19.1467394,42.3579922 C14.8756818,38.2034745 11.9204384,35.1597658 10.2810094,33.2268662 C7.61102615,30.0789353 6,26.0003608 6,21.5445791 C6,11.5788332 14.0588745,3.5 24,3.5 Z M24,6.5 C15.7093624,6.5 9,13.2395436 9,21.5386187 C9,25.1530011 10.2723798,28.5634094 12.5573493,31.2628393 L12.8664218,31.6228801 C13.9827463,32.9066746 15.6545139,34.6660948 17.8732465,36.8907091 L18.5552667,37.5720388 C19.7192871,38.7308133 21.0198367,40.0056254 22.4558558,41.3951714 L23.3113705,42.2211339 C23.6973221,42.592947 24.3028472,42.5929565 24.6888103,42.2211556 L26.3185495,40.6444516 C30.771579,36.3165234 33.8245067,33.1750973 35.4441776,31.2610351 C37.7282017,28.561867 39,25.1521808 39,21.5386187 C39,13.2395436 32.2906376,6.5 24,6.5 Z M24,14 C28.418278,14 32,17.581722 32,22 C32,26.418278 28.418278,30 24,30 C19.581722,30 16,26.418278 16,22 C16,17.581722 19.581722,14 24,14 Z M24,17 C21.2385763,17 19,19.2385763 19,22 C19,24.7614237 21.2385763,27 24,27 C26.7614237,27 29,24.7614237 29,22 C29,19.2385763 26.7614237,17 24,17 Z","id":"EnvironmentOutline-形状结合","fill":"currentColor","fillRule":"nonzero"}))))}},"874":function(e,t,a){},"875":function(e,t,a){"use strict";var n=a(876),i={"text/plain":"Text","text/html":"Url","default":"Text"};e.exports=function copy(e,t){var a,o,r,c,_,l,s=!1;t||(t={}),a=t.debug||!1;try{if(r=n(),c=document.createRange(),_=document.getSelection(),(l=document.createElement("span")).textContent=e,l.ariaHidden="true",l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",l.addEventListener("copy",(function(n){if(n.stopPropagation(),t.format)if(n.preventDefault(),void 0===n.clipboardData){a&&console.warn("unable to use e.clipboardData"),a&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var o=i[t.format]||i.default;window.clipboardData.setData(o,e)}else n.clipboardData.clearData(),n.clipboardData.setData(t.format,e);t.onCopy&&(n.preventDefault(),t.onCopy(n.clipboardData))})),document.body.appendChild(l),c.selectNodeContents(l),_.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");s=!0}catch(n){a&&console.error("unable to copy using execCommand: ",n),a&&console.warn("trying IE specific stuff");try{window.clipboardData.setData(t.format||"text",e),t.onCopy&&t.onCopy(window.clipboardData),s=!0}catch(n){a&&console.error("unable to copy using clipboardData: ",n),a&&console.error("falling back to prompt"),o=function format(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:"Copy to clipboard: #{key}, Enter"),window.prompt(o,e)}}finally{_&&("function"==typeof _.removeRange?_.removeRange(c):_.removeAllRanges()),l&&document.body.removeChild(l),r()}return s}},"876":function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,a=[],n=0;n<e.rangeCount;n++)a.push(e.getRangeAt(n));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||a.forEach((function(t){e.addRange(t)})),t&&t.focus()}}},"905":function(e,t,a){"use strict";a.r(t);var n=a(134),i=a(18),o=a(140),r=a(143),c=a(599),_=a(157),l=a.n(_),s=(a(874),a(133)),u=a(19),d=a(541),m=a(20),p=a(466),b=a(245),f=a(187),h=a(875),O=a.n(h),g=a(136),v=f.a.signInTypes;function isToDay(e){return(new Date).setHours(0,0,0,0)===new Date(l()(e).format("YYYY/MM/DD HH:mm:ss")).setHours(0,0,0,0)}t.default=function(){var e,t,a=(null===(e=Object(s.b)().router)||void 0===e?void 0:e.params.signin_id)||"",_=Object(m.useState)(),f=Object(i.a)(_,2),h=f[0],y=f[1],j=Object(m.useState)(),k=Object(i.a)(j,2),w=k[0],E=k[1],C=Object(m.useState)(""),D=Object(i.a)(C,2),M=D[0],x=D[1],P=Object(m.useState)(""),R=Object(i.a)(P,2),A=R[0],L=R[1],N=Object(m.useState)(""),T=Object(i.a)(N,2),S=T[0],I=T[1],U=function handleCopy(e){O()(e),r.L.show({"content":"已复制"})},B=Object(m.useState)("HH:mm:ss"),F=Object(i.a)(B,2),W=F[0],K=F[1],q=function getEqData(e,t){var a=e?{"sales_sign_in_id_eq":t}:{"id_eq":t};b.a.get("/api/v1/SalesSignIn",{"params":{"q":Object(n.a)({},a),"attachment_fields":{"6947625331062734848":"sign_images"}}}).then((function(e){200===e.code&&e.data&&E(e.data.datas[0])})).catch((function(e){console.log(e)}))};return Object(m.useEffect)((function(){!function refreshData(){Object(p.e)("SalesSignIn",a).then((function(e){if(200===e.code&&e.data){y(e.data);var t=v.find((function(t){return t.label===e.data.visit_type}));I(t?t.color:"#69a794"),-1!=="拜访其他客户 拜访询盘客户 拜访B+商机/线索 回访-自己老客户".indexOf(e.data.visit_type)&&(e.data.sales_sign_in_id?q(!1,e.data.sales_sign_in_id.id):q(!0,e.data.id))}}))}()}),[]),Object(m.useEffect)((function(){h&&(isToDay(h.created_at)||K("M月D日 HH:mm:ss"),!w||isToDay(h.created_at)&&isToDay(w.created_at)||K("M月D日 HH:mm:ss"))}),[h,w]),Object(g.jsxs)(o.e,{"className":"signin-show","children":[Object(g.jsx)(r.w,{"onBack":function onBack(){return Object(u.d)()},"children":Object(g.jsx)(o.e,{"className":"signin-show-navbar","children":h&&Object(g.jsxs)(g.Fragment,{"children":[Object(g.jsxs)(o.d,{"className":"signin-show-navbar-title","children":[h.sign_type,"详情"]}),Object(g.jsx)(o.e,{"className":"signin-show-navbar-tag","children":Object(g.jsxs)(r.J,{"color":S,"fill":"outline","style":{"--border-radius":"2px"},"children":[h.sign_type,"-",h.visit_type]})})]})})}),h&&Object(g.jsxs)(o.e,{"className":"signin-show-content","children":[Object(g.jsxs)(o.e,{"className":"signin-show-content-bg","children":[h.module_data&&Object(g.jsxs)(o.e,{"className":"signin-show-content-item row","children":[Object(g.jsxs)(o.d,{"className":"signin-show-content-item-title","children":[h.module_type,"："]}),Object(g.jsx)(o.d,{"className":"signin-show-content-item-content","onClick":function onClick(){var e,t="",a=JSON.parse(h.module_data).id;switch(h.module_type){case"线索":t="Leads";break;case"商机":t="Deals";break;case"线索公海":t="Public_Leads"}t&&a?Object(u.e)({"url":"pages/main/workbench/zoho/show/index?module_name=".concat(t,"&zoho_id=").concat(a)}):U(null===(e=JSON.parse(h.module_data))||void 0===e?void 0:e.name)},"children":null===(t=JSON.parse(h.module_data))||void 0===t?void 0:t.name})]}),Object(g.jsxs)(o.e,{"className":"signin-show-content-item row","children":[Object(g.jsx)(o.d,{"className":"signin-show-content-item-title","children":"签到者："}),Object(g.jsx)(o.d,{"className":"signin-show-content-item-content","onClick":function onClick(){return U(h.creator_id.name)},"children":h.creator_id.name})]}),Object(g.jsxs)(o.e,{"className":"signin-show-content-item time","children":[Object(g.jsx)(o.d,{"className":"signin-show-content-item-title","children":"签到时间："}),h&&w?"签到"===h.sign_type?Object(g.jsxs)(o.d,{"children":[l()(h.created_at).format(W)," --- ",l()(w.created_at).format(W)]}):Object(g.jsxs)(o.d,{"children":[l()(w.created_at).format(W)," --- ",l()(h.created_at).format(W)]}):Object(g.jsx)(o.d,{"children":l()(h.created_at).format(W)})]}),h.accompanied_person&&Object(g.jsxs)(o.e,{"className":"signin-show-content-item","children":[Object(g.jsx)(o.d,{"className":"signin-show-content-item-title","children":"陪访人："}),Object(g.jsx)(o.d,{"children":h.accompanied_person.name})]}),h.sign_remark&&Object(g.jsxs)(o.e,{"className":"signin-show-content-item","onClick":function onClick(){return x(h.sign_remark)},"children":[Object(g.jsx)(o.d,{"className":"signin-show-content-item-title","children":"拜访结果："}),Object(g.jsx)(o.d,{"className":"signin-show-content-item-content webkit-hidden2","children":h.sign_remark})]}),w&&w.sign_remark&&Object(g.jsxs)(o.e,{"className":"signin-show-content-item","onClick":function onClick(){return x(h.sign_remark)},"children":[Object(g.jsx)(o.d,{"className":"signin-show-content-item-title","children":"拜访结果："}),Object(g.jsx)(o.d,{"className":"signin-show-content-item-content webkit-hidden2","children":w.sign_remark})]}),Object(g.jsxs)(o.e,{"className":"signin-show-content-item","children":[Object(g.jsxs)(o.d,{"className":"signin-show-content-item-title","children":[h.sign_type,"位置："]}),Object(g.jsxs)(o.d,{"onClick":function onClick(){window.open("http://uri.amap.com/marker?position=".concat(h.location,"&name=").concat(h.address,"&coordinate=gaode&callnative=1"))},"children":[Object(g.jsx)(c.a,{"fontSize":16,"style":{"marginRight":"4px"}}),h.address]})]}),Object(g.jsxs)(o.e,{"className":"signin-show-content-item","children":[Object(g.jsxs)(o.d,{"className":"signin-show-content-item-title","children":[h.sign_type,"照片："]}),Object(g.jsx)(o.e,{"className":"signin-show-content-item-images","children":h.sign_images.map((function(e,t){return Object(g.jsx)(o.e,{"className":"signin-show-content-item-images-item","children":Object(g.jsx)(d.a,{"className":"signin-show-content-item-image","url":e.url,"thumb_url":e.thumb_url,"index":t})},t)}))})]})]}),w&&Object(g.jsxs)(o.e,{"className":"signin-show-content-bg","children":[Object(g.jsxs)(o.e,{"className":"signin-show-content-item","children":[Object(g.jsxs)(o.d,{"className":"signin-show-content-item-title","children":[w.sign_type,"位置："]}),Object(g.jsxs)(o.d,{"onClick":function onClick(){window.open("http://uri.amap.com/marker?position=".concat(w.location,"&name=").concat(h.address,"&coordinate=gaode&callnative=1"))},"children":[Object(g.jsx)(c.a,{"fontSize":16,"style":{"marginRight":"4px"}}),h.address]})]}),Object(g.jsxs)(o.e,{"className":"signin-show-content-item","children":[Object(g.jsxs)(o.d,{"className":"signin-show-content-item-title","children":[w.sign_type,"照片："]}),Object(g.jsx)(o.e,{"className":"signin-show-content-item-images","children":w.sign_images.map((function(e,t){return Object(g.jsx)(o.e,{"className":"signin-show-content-item-images-item","children":Object(g.jsx)(d.a,{"className":"signin-show-content-item-image","url":e.url,"thumb_url":e.thumb_url,"index":t})},t)}))})]})]})]}),Object(g.jsx)(r.z,{"visible":!!M,"bodyStyle":{"height":"40vh"},"onMaskClick":function onMaskClick(){return x("")},"children":Object(g.jsx)(o.e,{"className":"popup-textarea","children":Object(g.jsx)(o.d,{"style":{"fontSize":"14px"},"children":M})})}),Object(g.jsx)(r.z,{"visible":!!A,"bodyStyle":{"height":"80vh"},"onMaskClick":function onMaskClick(){return L("")}})]})}}}]);