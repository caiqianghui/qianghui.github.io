(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{"280":function(e,c,t){"use strict";t.r(c);var a=t(18),o=t(143),n=t(20),l=(t(191),t(140)),s=t(900),i=t(172),r=t(136);c.default=function(e){var c=e.onSelect,t=e.field,d=e.isDisable,u=e.onBlur,j=e.placeholder,h=e.onChange,m=Object(n.useState)([]),b=Object(a.a)(m,2),p=b[0],f=b[1],O=Object(n.useState)(!1),k=Object(a.a)(O,2),N=k[0],g=k[1],v=Object(n.useState)(""),x=Object(a.a)(v,2),C=x[0],S=x[1],w=Object(n.useState)(""),_=Object(a.a)(w,2),y=_[0],T=_[1],I=Object(n.useState)(1),L=Object(a.a)(I,2),M=L[0],q=L[1],J=Object(n.useState)({"more_records":!0}),z=Object(a.a)(J,2),B=z[0],D=z[1],F=function getFields(e,c){var a={"page":e,"per_page":20};c?i.a.post("/crm/v2/coql",{"select_query":"select Name from ".concat(t.lookup.module,' where Name like "%').concat(c,'%" LIMIT ').concat(20*(e-1)," , ").concat(20)}).then((function(c){console.log("getUsers",c),c&&c.data?(q(e),f(1===e?c.data:p.concat(c.data)),D(c.info)):(f([]),D({"more_records":!1}))})):i.a.get("/crm/v2/".concat(t.lookup.module),a).then((function(c){c&&c.data?(q(e),f(1===e?c.data:p.concat(c.data)),D(c.info)):(f([]),D({"more_records":!1}))}))};return Object(r.jsxs)(l.e,{"className":"field","onClick":function onClick(){console.log("查询列表",e.value),d||g(!0),t.lookup&&!p.length&&F(1)},"children":[Object(r.jsxs)(l.e,{"className":"field-content","children":[C?Object(r.jsx)(l.d,{"className":"field-text","children":C}):Object(r.jsx)(l.d,{"className":"field-placeholder","children":j||""}),Object(r.jsx)(s.a,{})]}),Object(r.jsx)(o.z,{"className":"picklist-popup","visible":N,"onMaskClick":function onMaskClick(){g(!1)},"bodyStyle":{"minHeight":"90vh"},"children":Object(r.jsxs)(l.e,{"className":"picklist-popup-content","children":[Object(r.jsx)(l.e,{"className":"picklist-view-input","children":Object(r.jsx)(o.C,{"placeholder":"搜索"+t.display_label,"value":y,"onClear":function onClear(){F(1)},"onChange":function onChange(e){T(e)},"onSearch":function onSearch(){F(1,y)}})}),Object(r.jsxs)(l.c,{"scrollY":!0,"enhanced":!0,"lowerThreshold":200,"className":"picklist","onScrollToLower":function onScrollToLower(){B.more_records&&F(M+1,y)},"children":[Object(r.jsx)(o.e,{"defaultValue":e.value?[e.value]:[],"onChange":function onChange(e){var a={"name":e[0]["".concat(t.lookup.module.slice(0,-1),"_Name")],"id":e[0].id},o=p.find((function(c){return c.id===e[0].id}));S(o?o["".concat(t.lookup.module.slice(0,-1),"_Name")]||o.Name:""),c&&c(o||{}),u&&u(o||{}),h&&h(a.id),g(!1)},"children":p.map((function(e,c){return Object(r.jsx)(o.e.Item,{"className":"checklist-item","value":e,"children":e["".concat(t.lookup.module.slice(0,-1),"_Name")]||e.Name},c)}))}),!p.length&&y&&Object(r.jsxs)(o.j,{"children":['未找到 "',y,'"']})]})]})})]})}}}]);